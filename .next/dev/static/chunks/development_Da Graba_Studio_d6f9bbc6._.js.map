{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/odgmusic/development/Da%20Graba_Studio/app/planer/page.tsx"],"sourcesContent":["'use client';\n\nimport { useRouter } from 'next/navigation';\nimport { Activity, Loader2, Sparkles } from 'lucide-react';\nimport { useState } from 'react';\n\nexport default function Planer() {\n    const router = useRouter();\n\n    // Local state for the Record UI & Chat\n    const [isRecording, setIsRecording] = useState(false);\n    const [chatInput, setChatInput] = useState('');\n    const [isRedirecting, setIsRedirecting] = useState(false);\n    const [durationLimit, setDurationLimit] = useState(120); // 120 seconds = 2 minutes\n    const [messages, setMessages] = useState<{ role: 'user' | 'assistant', content: string }[]>([\n        { role: 'assistant', content: '¡Hola! Soy John, tu Ingeniero y Productor Musical de Da Graba. Vamos a planear este hit. ¿Qué estilo o referencia tienes en mente hoy?' }\n    ]);\n    const [isTyping, setIsTyping] = useState(false);\n\n    const handleChatSubmit = async () => {\n        if (!chatInput.trim() || isTyping) return;\n\n        const userMessage = chatInput.toLowerCase().trim();\n        const triggers = ['dale', 'manos a la obra', 'empieza', 'ok', 'vamos', 'listo', 'arrancamos'];\n        const shouldRedirect = triggers.some(t => userMessage.includes(t));\n\n        setChatInput('');\n        setMessages(prev => [...prev, { role: 'user', content: chatInput }]);\n\n        if (shouldRedirect) {\n            setIsTyping(true);\n            // Simulate a brief AI \"confirmation\" before jumping\n            setTimeout(() => {\n                setIsRedirecting(true);\n                setTimeout(() => {\n                    router.push('/studio?session=true');\n                }, 2000);\n            }, 600);\n            return;\n        }\n\n        setIsTyping(true);\n        try {\n            const response = await fetch('/api/ai/engineer', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({\n                    message: chatInput,\n                    history: messages\n                })\n            });\n\n            const data = await response.json();\n            if (data.message) {\n                setMessages(prev => [...prev, { role: 'assistant', content: data.message }]);\n            }\n        } catch (error) {\n            console.error('Chat Error:', error);\n            setMessages(prev => [...prev, { role: 'assistant', content: 'Lo siento, tuve un problema técnico. ¿Podemos intentar de nuevo?' }]);\n        } finally {\n            setIsTyping(false);\n        }\n    };\n\n    return (\n        <div className=\"flex flex-col h-full w-full items-center justify-center bg-[#0D0D0F] relative overflow-hidden pointer-events-auto\">\n\n\n\n            {/* MAIN CONTAINER - More centered and higher */}\n            <div className=\"w-full max-w-4xl flex flex-col items-center gap-8 z-10 -mt-20\">\n\n                {/* Header Section */}\n                <div className=\"flex flex-col items-center text-center gap-4 mb-8\">\n                    <div className=\"flex items-center gap-3 px-4 py-1.5 rounded-full bg-white/5 border border-white/10 backdrop-blur-md mb-2\">\n                        <Activity size={14} className=\"text-cyan-glow animate-pulse\" />\n                        <span className=\"text-[10px] font-bold tracking-[0.3em] text-silver-light uppercase\">Ingeniero John Activo</span>\n                    </div>\n                    <h1 className=\"text-4xl font-bold tracking-tighter text-white sm:text-5xl\">\n                        Planea Tu <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-cyan-glow to-blue-500\">Próximo Hit</span>\n                    </h1>\n                    <p className=\"text-silver-dark max-w-lg text-sm leading-relaxed\">\n                        Define el estilo, la letra y la estructura con John antes de entrar al studio.\n                    </p>\n                </div>\n\n                {/* Genre Selector */}\n                <GenreSelector\n                    onSelect={(genre) => {\n                        setChatInput(`Quiero hacer un tema de ${genre}`);\n                    }}\n                />\n\n                {/* AI AGENT CHAT BOX */}\n                <div className=\"w-full bg-[#0B1015]/80 backdrop-blur-2xl border border-white/10 rounded-2xl shadow-[0_30px_100px_rgba(0,0,0,0.8)] overflow-hidden flex flex-col h-[500px]\">\n                    {/* Chat Header */}\n                    <div className=\"bg-[#111720] border-b border-white/5 px-6 py-4 flex items-center justify-between\">\n                        <div className=\"flex items-center gap-3\">\n                            <div className=\"w-2 h-2 rounded-full bg-cyan-glow animate-pulse shadow-[0_0_8px_#00F0FF]\" />\n                            <span className=\"text-silver-light text-xs font-mono tracking-widest uppercase\">John (Productor / Ingeniero)</span>\n                        </div>\n                        <div className=\"flex items-center gap-4\">\n                            <span className=\"text-[10px] text-silver-dark font-mono tracking-widest\">LIMIT: 120s DEMO</span>\n                            <span className=\"text-[10px] text-green-500 font-mono tracking-widest px-2 py-0.5 bg-green-500/10 rounded border border-green-500/20\">EN LÍNEA</span>\n                        </div>\n                    </div>\n\n                    {/* Chat Messages Area */}\n                    <div className=\"flex-1 overflow-y-auto p-6 flex flex-col gap-4 font-sans text-sm custom-scrollbar\">\n                        {messages.map((msg, idx) => (\n                            <div key={idx} className={`flex items-start gap-4 w-[85%] ${msg.role === 'user' ? 'self-end flex-row-reverse' : ''}`}>\n                                <div className={`w-8 h-8 rounded-full flex items-center justify-center shrink-0 shadow-lg ${msg.role === 'assistant' ? 'bg-gradient-to-br from-cyan-glow/20 to-blue-600/20 border border-cyan-glow' : 'bg-[#1C2633] border border-[#222]'}`}>\n                                    {msg.role === 'assistant' ? <Activity size={14} className=\"text-cyan-glow\" /> : <span className=\"text-[10px] font-bold text-white\">TU</span>}\n                                </div>\n                                <div className={`px-5 py-3 text-silver-light shadow-xl rounded-2xl leading-relaxed ${msg.role === 'assistant' ? 'bg-[#1C2633]/80 border border-white/5 rounded-tl-sm' : 'bg-primary/20 border border-primary/30 rounded-tr-sm text-white'}`}>\n                                    <p>{msg.content}</p>\n                                </div>\n                            </div>\n                        ))}\n                        {isTyping && (\n                            <div className=\"flex items-start gap-4 w-[85%]\">\n                                <div className=\"w-8 h-8 rounded-full bg-cyan-glow/20 border border-cyan-glow flex items-center justify-center shrink-0\">\n                                    <Activity size={14} className=\"text-cyan-glow animate-pulse\" />\n                                </div>\n                                <div className=\"bg-[#1C2633]/80 border border-white/5 rounded-2xl rounded-tl-sm px-5 py-3 text-silver-light\">\n                                    <div className=\"flex gap-1.5 py-1\">\n                                        <div className=\"w-1.5 h-1.5 bg-cyan-glow rounded-full animate-bounce\" />\n                                        <div className=\"w-1.5 h-1.5 bg-cyan-glow rounded-full animate-bounce [animation-delay:0.2s]\" />\n                                        <div className=\"w-1.5 h-1.5 bg-cyan-glow rounded-full animate-bounce [animation-delay:0.4s]\" />\n                                    </div>\n                                </div>\n                            </div>\n                        )}\n                    </div>\n\n                    {/* Chat Input Area */}\n                    <div className=\"p-4 bg-black/40 border-t border-white/5 flex gap-3 backdrop-blur-md\">\n                        <input\n                            type=\"text\"\n                            placeholder=\"Describe tu visión musical (ej: Trap pesado con melodía oscura)...\"\n                            className=\"bg-[#131B24] border border-[#222] rounded-xl px-6 py-3 w-full text-sm text-silver-light focus:outline-none focus:border-cyan-glow/50 focus:bg-[#1a2530] transition-all placeholder:text-silver-dark/40\"\n                            value={chatInput}\n                            onChange={(e) => setChatInput(e.target.value)}\n                            onKeyDown={(e) => e.key === 'Enter' && handleChatSubmit()}\n                        />\n                        <button\n                            onClick={handleChatSubmit}\n                            disabled={isRedirecting || !chatInput.trim()}\n                            className=\"bg-primary hover:bg-orange-500 text-white rounded-xl px-8 py-3 text-xs font-bold transition-all active:scale-95 shadow-[0_0_20px_rgba(255,107,0,0.3)] disabled:opacity-50 disabled:active:scale-100 flex items-center justify-center uppercase tracking-widest\"\n                        >\n                            Enviar\n                        </button>\n                    </div>\n                </div>\n            </div>\n\n            {/* FULLSCREEN REDIRECTING OVERLAY */}\n            {isRedirecting && (\n                <div className=\"fixed inset-0 z-50 flex flex-col items-center justify-center bg-black/80 backdrop-blur-md pointer-events-auto\">\n                    {/* The spectacular glowing DG Logo */}\n                    <div className=\"w-64 h-64 rounded-3xl relative flex items-center justify-center shadow-[0_0_100px_rgba(255,107,0,0.8)] animate-pulse overflow-hidden border border-orange-500/30\">\n                        {/* Outer spinner ring */}\n                        <div className=\"absolute inset-0 border-8 border-t-white border-r-transparent border-b-white/10 border-l-transparent rounded-3xl animate-spin z-10\" />\n                        <img src=\"/logo.jpg\" alt=\"DA GRABA Loading Logo\" className=\"w-full h-full object-cover\" />\n                    </div>\n\n                    <div className=\"mt-8 flex flex-col items-center gap-2\">\n                        <div className=\"flex items-center gap-3\">\n                            <Activity size={16} className=\"text-primary animate-bounce\" />\n                            <h2 className=\"text-xl font-bold tracking-widest text-[#E0E0E0]\">ANALIZANDO IDEA...</h2>\n                        </div>\n                        <p className=\"text-silver-dark text-sm font-mono tracking-wide max-w-sm text-center\">\n                            Ingresando a la fase de creación IA...\n                        </p>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 492, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/development/Da Graba_Studio/node_modules/lucide-react/dist/esm/icons/activity.js","sources":["file:///Users/odgmusic/development/Da%20Graba_Studio/node_modules/lucide-react/src/icons/activity.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2',\n      key: '169zse',\n    },\n  ],\n];\n\n/**\n * @component @name Activity\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjIgMTJoLTIuNDhhMiAyIDAgMCAwLTEuOTMgMS40NmwtMi4zNSA4LjM2YS4yNS4yNSAwIDAgMS0uNDggMEw5LjI0IDIuMThhLjI1LjI1IDAgMCAwLS40OCAwbC0yLjM1IDguMzZBMiAyIDAgMCAxIDQuNDkgMTJIMiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/activity\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Activity = createLucideIcon('activity', __iconNode);\n\nexport default Activity;\n"],"names":[],"mappings":";;;;;;;;;;;;;AAGO,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,UAAA,CAAA,CAAA,CAAuB;IAClC;QACE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QACA;YACE,CAAA,EAAG,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;YACH,GAAA,CAAA,CAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;QAAA;KACP;CAEJ;AAaA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAM,QAAA,CAAA,CAAA,KAAW,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,oMAAA,EAAiB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAY,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA"}}]
}