{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/odgmusic/development/Da%20Graba_Studio/store/useDAWStore.ts"],"sourcesContent":["import { create } from 'zustand';\n\nexport interface FaderState {\n    id: string; // 'vocal', 'beat', 'bass', 'fx', 'ch-...'\n    label: string;\n    value: number; // 0 a 100\n    isMuted: boolean;\n    pan: number;\n    isSoloed: boolean;\n}\n\nexport type BottomPanelState = 'mixer' | 'piano_roll' | 'closed';\n\ninterface DAWStore {\n    faders: FaderState[];\n    isTraining: boolean;\n    activeArtistId: string | null;\n    activeBottomPanel: BottomPanelState;\n    mixerBank: 1 | 2; // 1 = Ch 1-16, 2 = Ch 17-32\n    // Acciones para que la IA mueva los faders\n    setFaderValue: (id: string, value: number) => void;\n    setTrainingStatus: (status: boolean) => void;\n    resetConsole: () => void;\n    // Preserving DAW UI state\n    setPan: (id: string, pan: number) => void;\n    toggleSolo: (id: string) => void;\n    toggleMute: (id: string) => void;\n    setActiveBottomPanel: (panel: BottomPanelState) => void;\n    setMixerBank: (bank: 1 | 2) => void;\n}\n\n// Generate 32 default faders\nconst defaultFaders: FaderState[] = Array.from({ length: 32 }, (_, i) => ({\n    id: `ch-${i + 1}`,\n    label: i < 16 ? `CH ${i + 1}` : (i < 24 ? `AUX ${i - 15}` : (i < 30 ? `BUS ${i - 23}` : `MTR L/R`)),\n    value: 75,\n    isMuted: false,\n    pan: 0,\n    isSoloed: false,\n}));\n\n// Set explicit labels for the first 4 for backwards compatibility with the Auto-mix Modal logic\ndefaultFaders[0] = { ...defaultFaders[0], id: 'vocal', label: 'VOCAL' };\ndefaultFaders[1] = { ...defaultFaders[1], id: 'beat', label: 'BEAT' };\ndefaultFaders[2] = { ...defaultFaders[2], id: 'bass', label: 'BASS' };\ndefaultFaders[3] = { ...defaultFaders[3], id: 'fx', label: 'FX' };\n\nexport const useDAWStore = create<DAWStore>((set) => ({\n    faders: defaultFaders,\n    isTraining: false,\n    activeArtistId: null,\n    activeBottomPanel: 'mixer', // Mixer opens by default\n    mixerBank: 1,\n\n    setActiveBottomPanel: (panel) => set({ activeBottomPanel: panel }),\n    setMixerBank: (bank) => set({ mixerBank: bank }),\n\n    setFaderValue: (id, value) => set((state) => ({\n        faders: state.faders.map((f) => f.id === id ? { ...f, value } : f)\n    })),\n\n    setTrainingStatus: (status) => set({ isTraining: status }),\n\n    resetConsole: () => set((state) => ({\n        faders: state.faders.map((f) => ({ ...f, value: 0 }))\n    })),\n\n    setPan: (id, pan) => set((state) => ({\n        faders: state.faders.map((f) => f.id === id ? { ...f, pan } : f)\n    })),\n\n    toggleSolo: (id) => set((state) => ({\n        faders: state.faders.map((f) => f.id === id ? { ...f, isSoloed: !f.isSoloed } : f)\n    })),\n\n    toggleMute: (id) => set((state) => ({\n        faders: state.faders.map((f) => f.id === id ? { ...f, isMuted: !f.isMuted } : f)\n    })),\n}));\n"],"names":[],"mappings":";;;;AAAA;;AA+BA,6BAA6B;AAC7B,MAAM,gBAA8B,MAAM,IAAI,CAAC;IAAE,QAAQ;AAAG,GAAG,CAAC,GAAG,IAAM,CAAC;QACtE,IAAI,CAAC,GAAG,EAAE,IAAI,GAAG;QACjB,OAAO,IAAI,KAAK,CAAC,GAAG,EAAE,IAAI,GAAG,GAAI,IAAI,KAAK,CAAC,IAAI,EAAE,IAAI,IAAI,GAAI,IAAI,KAAK,CAAC,IAAI,EAAE,IAAI,IAAI,GAAG,CAAC,OAAO,CAAC;QACjG,OAAO;QACP,SAAS;QACT,KAAK;QACL,UAAU;IACd,CAAC;AAED,gGAAgG;AAChG,aAAa,CAAC,EAAE,GAAG;IAAE,GAAG,aAAa,CAAC,EAAE;IAAE,IAAI;IAAS,OAAO;AAAQ;AACtE,aAAa,CAAC,EAAE,GAAG;IAAE,GAAG,aAAa,CAAC,EAAE;IAAE,IAAI;IAAQ,OAAO;AAAO;AACpE,aAAa,CAAC,EAAE,GAAG;IAAE,GAAG,aAAa,CAAC,EAAE;IAAE,IAAI;IAAQ,OAAO;AAAO;AACpE,aAAa,CAAC,EAAE,GAAG;IAAE,GAAG,aAAa,CAAC,EAAE;IAAE,IAAI;IAAM,OAAO;AAAK;AAEzD,MAAM,cAAc,IAAA,wLAAM,EAAW,CAAC,MAAQ,CAAC;QAClD,QAAQ;QACR,YAAY;QACZ,gBAAgB;QAChB,mBAAmB;QACnB,WAAW;QAEX,sBAAsB,CAAC,QAAU,IAAI;gBAAE,mBAAmB;YAAM;QAChE,cAAc,CAAC,OAAS,IAAI;gBAAE,WAAW;YAAK;QAE9C,eAAe,CAAC,IAAI,QAAU,IAAI,CAAC,QAAU,CAAC;oBAC1C,QAAQ,MAAM,MAAM,CAAC,GAAG,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,KAAK;4BAAE,GAAG,CAAC;4BAAE;wBAAM,IAAI;gBACpE,CAAC;QAED,mBAAmB,CAAC,SAAW,IAAI;gBAAE,YAAY;YAAO;QAExD,cAAc,IAAM,IAAI,CAAC,QAAU,CAAC;oBAChC,QAAQ,MAAM,MAAM,CAAC,GAAG,CAAC,CAAC,IAAM,CAAC;4BAAE,GAAG,CAAC;4BAAE,OAAO;wBAAE,CAAC;gBACvD,CAAC;QAED,QAAQ,CAAC,IAAI,MAAQ,IAAI,CAAC,QAAU,CAAC;oBACjC,QAAQ,MAAM,MAAM,CAAC,GAAG,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,KAAK;4BAAE,GAAG,CAAC;4BAAE;wBAAI,IAAI;gBAClE,CAAC;QAED,YAAY,CAAC,KAAO,IAAI,CAAC,QAAU,CAAC;oBAChC,QAAQ,MAAM,MAAM,CAAC,GAAG,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,KAAK;4BAAE,GAAG,CAAC;4BAAE,UAAU,CAAC,EAAE,QAAQ;wBAAC,IAAI;gBACpF,CAAC;QAED,YAAY,CAAC,KAAO,IAAI,CAAC,QAAU,CAAC;oBAChC,QAAQ,MAAM,MAAM,CAAC,GAAG,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,KAAK;4BAAE,GAAG,CAAC;4BAAE,SAAS,CAAC,EAAE,OAAO;wBAAC,IAAI;gBAClF,CAAC;IACL,CAAC"}},
    {"offset": {"line": 95, "column": 0}, "map": {"version":3,"sources":["file:///Users/odgmusic/development/Da%20Graba_Studio/lib/modal-client.ts"],"sourcesContent":["/**\n * Modal.com Client wrapper for Next.js (Client-side / Server-side)\n * As the Modal SDK is Python, we trigger Modal Functions via their HTTP Webhook URLs,\n * or mock the latency if no URL is provided yet.\n */\n\nexport const modalClient = {\n    /**\n     * Calls the remote `process_vocal_cloning` function in Modal.\n     */\n    async process_vocal_cloning(options?: { artistId?: string }) {\n        console.log('[Modal Client] Executing remote Modal function: process_vocal_cloning');\n\n        // Simulate network latency of the remote GPU inference/processing\n        await new Promise((resolve) => setTimeout(resolve, 3000));\n\n        // Return mock success payload that signals the frontend to adjust mix\n        return {\n            success: true,\n            message: 'Vocal cloned and processed successfully.',\n            mixParameters: {\n                vocalLevel: 85,\n                beatLevel: 75\n            }\n        };\n    }\n};\n"],"names":[],"mappings":"AAAA;;;;CAIC;;;;AAEM,MAAM,cAAc;IACvB;;KAEC,GACD,MAAM,uBAAsB,OAA+B;QACvD,QAAQ,GAAG,CAAC;QAEZ,kEAAkE;QAClE,MAAM,IAAI,QAAQ,CAAC,UAAY,WAAW,SAAS;QAEnD,sEAAsE;QACtE,OAAO;YACH,SAAS;YACT,SAAS;YACT,eAAe;gBACX,YAAY;gBACZ,WAAW;YACf;QACJ;IACJ;AACJ"}},
    {"offset": {"line": 128, "column": 0}, "map": {"version":3,"sources":["file:///Users/odgmusic/development/Da%20Graba_Studio/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from 'clsx';\nimport { twMerge } from 'tailwind-merge';\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,4MAAO,EAAC,IAAA,mLAAI,EAAC;AACtB"}},
    {"offset": {"line": 146, "column": 0}, "map": {"version":3,"sources":["file:///Users/odgmusic/development/Da%20Graba_Studio/components/ui/Slider.tsx"],"sourcesContent":["import { forwardRef } from 'react';\nimport { cn } from '@/lib/utils';\n\nexport interface SliderProps extends React.InputHTMLAttributes<HTMLInputElement> {\n    orientation?: 'horizontal' | 'vertical';\n}\n\nconst Slider = forwardRef<HTMLInputElement, SliderProps>(\n    ({ className, orientation = 'horizontal', ...props }, ref) => {\n        return (\n            <input\n                type=\"range\"\n                ref={ref}\n                className={cn(\n                    'appearance-none bg-transparent cursor-pointer',\n                    // Custom track sizing and colors\n                    '[&::-webkit-slider-runnable-track]:bg-carbon [&::-webkit-slider-runnable-track]:border [&::-webkit-slider-runnable-track]:border-silver-dark/30',\n                    '[&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:bg-silver-light',\n                    '[&::-webkit-slider-thumb]:shadow-[0_0_10px_rgba(255,107,0,0.3)] hover:[&::-webkit-slider-thumb]:shadow-[0_0_15px_rgba(255,107,0,0.6)]',\n                    {\n                        'w-full h-2 [&::-webkit-slider-runnable-track]:rounded-full [&::-webkit-slider-runnable-track]:h-2 [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:-mt-1': orientation === 'horizontal',\n                        // Vertical slider hacks\n                        '[appearance:slider-vertical] h-full w-2 [&::-webkit-slider-runnable-track]:w-2 [&::-webkit-slider-thumb]:h-8 [&::-webkit-slider-thumb]:w-6 [&::-webkit-slider-thumb]:rounded-sm [&::-webkit-slider-thumb]:border [&::-webkit-slider-thumb]:border-carbon': orientation === 'vertical',\n                    },\n                    className\n                )}\n                {...props}\n            />\n        );\n    }\n);\nSlider.displayName = 'Slider';\n\nexport { Slider };\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAMA,MAAM,uBAAS,IAAA,8MAAU,OACrB,CAAC,EAAE,SAAS,EAAE,cAAc,YAAY,EAAE,GAAG,OAAO,EAAE;IAClD,qBACI,gOAAC;QACG,MAAK;QACL,KAAK;QACL,WAAW,IAAA,wJAAE,EACT,iDACA,iCAAiC;QACjC,mJACA,uFACA,yIACA;YACI,wOAAwO,gBAAgB;YACxP,wBAAwB;YACxB,4PAA4P,gBAAgB;QAChR,GACA;QAEH,GAAG,KAAK;;;;;;AAGrB;;AAEJ,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 186, "column": 0}, "map": {"version":3,"sources":["file:///Users/odgmusic/development/Da%20Graba_Studio/components/daw/VUMeter.tsx"],"sourcesContent":["import { cn } from '@/lib/utils';\n\ninterface VUMeterProps {\n    level: number; // 0 to 127\n    className?: string;\n}\n\nexport function VUMeter({ level, className }: VUMeterProps) {\n    // Simple segmentation\n    const totalSegments = 30;\n    const activeSegments = Math.round((level / 127) * totalSegments);\n\n    return (\n        <div className={cn(\"flex flex-col justify-end bg-carbon/80 rounded-sm overflow-hidden p-[2px] gap-[1px]\", className)}>\n            {Array.from({ length: totalSegments }).map((_, i) => {\n                // Render from top down\n                const segmentIndex = totalSegments - 1 - i;\n                const isActive = segmentIndex < activeSegments;\n                let colorClass = 'bg-primary/20'; // default off\n\n                if (isActive) {\n                    if (segmentIndex > totalSegments - 4) {\n                        colorClass = 'bg-red-500 shadow-[0_0_5px_rgba(239,68,68,0.8)]'; // Clipping\n                    } else if (segmentIndex > totalSegments - 10) {\n                        colorClass = 'bg-yellow-400 shadow-[0_0_5px_rgba(250,204,21,0.8)]'; // Warning\n                    } else {\n                        colorClass = 'bg-green-500 shadow-[0_0_5px_rgba(34,197,94,0.8)]'; // Safe\n                    }\n                } else {\n                    colorClass = 'bg-neutral-800';\n                }\n\n                return (\n                    <div\n                        key={i}\n                        className={cn(\"w-full h-full min-h-[2px] transition-colors duration-75 rounded-xs\", colorClass)}\n                    />\n                );\n            })}\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAAA;;;AAOO,SAAS,QAAQ,EAAE,KAAK,EAAE,SAAS,EAAgB;IACtD,sBAAsB;IACtB,MAAM,gBAAgB;IACtB,MAAM,iBAAiB,KAAK,KAAK,CAAC,AAAC,QAAQ,MAAO;IAElD,qBACI,gOAAC;QAAI,WAAW,IAAA,wJAAE,EAAC,uFAAuF;kBACrG,MAAM,IAAI,CAAC;YAAE,QAAQ;QAAc,GAAG,GAAG,CAAC,CAAC,GAAG;YAC3C,uBAAuB;YACvB,MAAM,eAAe,gBAAgB,IAAI;YACzC,MAAM,WAAW,eAAe;YAChC,IAAI,aAAa,iBAAiB,cAAc;YAEhD,IAAI,UAAU;gBACV,IAAI,eAAe,gBAAgB,GAAG;oBAClC,aAAa,mDAAmD,WAAW;gBAC/E,OAAO,IAAI,eAAe,gBAAgB,IAAI;oBAC1C,aAAa,uDAAuD,UAAU;gBAClF,OAAO;oBACH,aAAa,qDAAqD,OAAO;gBAC7E;YACJ,OAAO;gBACH,aAAa;YACjB;YAEA,qBACI,gOAAC;gBAEG,WAAW,IAAA,wJAAE,EAAC,sEAAsE;eAD/E;;;;;QAIjB;;;;;;AAGZ;KAlCgB"}},
    {"offset": {"line": 242, "column": 0}, "map": {"version":3,"sources":["file:///Users/odgmusic/development/Da%20Graba_Studio/components/daw/Fader.tsx"],"sourcesContent":["'use client';\n\nimport { useDAWStore } from '@/store/useDAWStore';\nimport { Slider } from '@/components/ui/Slider';\nimport { VUMeter } from './VUMeter';\n\ninterface FaderProps {\n    id: string;\n}\n\nexport function Fader({ id }: FaderProps) {\n    const fader = useDAWStore((state) => state.faders.find((f) => f.id === id));\n    const setFaderValue = useDAWStore((state) => state.setFaderValue);\n    const toggleSolo = useDAWStore((state) => state.toggleSolo);\n    const toggleMute = useDAWStore((state) => state.toggleMute);\n\n    if (!fader) return null;\n\n    return (\n        <div className=\"flex flex-col items-center w-16 group\">\n\n            {/* Top Section: Buttons & Small Screen */}\n            <div className=\"flex flex-col gap-2 items-center mb-6 w-full px-1\">\n\n                {/* Mini Routing/Pan Screen simulation */}\n                <div className=\"w-full h-8 bg-[#0a1015] border border-cyan-glow/20 rounded-sm flex items-center justify-center shadow-inner mb-2 overflow-hidden relative\">\n                    <div className=\"absolute inset-0 bg-cyan-glow/5\" />\n                    <span className=\"text-[9px] font-mono text-cyan-glow tracking-tighter mix-blend-screen\">{fader.pan === 0 ? 'C' : fader.pan}</span>\n                </div>\n\n                <button\n                    onClick={() => toggleSolo(id)}\n                    className={`w-full h-6 rounded-sm text-[9px] font-bold border transition-colors shadow-sm ${fader.isSoloed ? 'bg-[#ffaa00] border-[#ffaa00] text-black shadow-[0_0_10px_rgba(255,170,0,0.6)]' : 'bg-[#1a1a1a] border-[#333] text-silver-dark hover:bg-[#2a2a2a]'}`}\n                >\n                    SOLO\n                </button>\n                <button\n                    onClick={() => toggleMute(id)}\n                    className={`w-full h-6 rounded-sm text-[9px] font-bold border transition-colors shadow-sm ${fader.isMuted ? 'bg-red-600 border-red-600 text-black shadow-[0_0_10px_rgba(255,0,0,0.6)]' : 'bg-[#1a1a1a] border-[#333] text-silver-dark hover:bg-[#2a2a2a]'}`}\n                >\n                    MUTE\n                </button>\n            </div>\n\n            {/* Main Fader Track Area */}\n            <div className=\"relative h-[300px] w-full bg-[#111] border-x border-[#222] flex shadow-inner group-hover:bg-[#141414] transition-colors rounded-t-sm\">\n\n                {/* Scale Markings Container */}\n                <div className=\"absolute left-1 inset-y-0 w-2 flex flex-col justify-between py-4 pointer-events-none z-0\">\n                    {[10, 5, 0, -5, -10, -20, -30, -60].map((val, i) => (\n                        <div key={i} className=\"w-full border-t border-silver-dark/40 relative\">\n                            {(val === 0 || val === 10 || val === -60) && (\n                                <span className={`absolute left-3 -top-2 text-[7px] font-mono ${(val === 0) ? 'text-primary' : 'text-silver-dark'}`}>\n                                    {val === -60 ? '-âˆž' : val}\n                                </span>\n                            )}\n                        </div>\n                    ))}\n                </div>\n\n                {/* LED VU Meter integrated into fader track */}\n                <div className=\"absolute right-1 top-4 bottom-4 w-1.5 opacity-80 pointer-events-none z-0\">\n                    <VUMeter level={fader.isMuted ? 0 : Math.floor(fader.value * 1.27)} className=\"h-full w-full rounded-sm\" />\n                </div>\n\n                {/* Functional Slider Track */}\n                <div className=\"absolute inset-0 flex justify-center z-10 w-full\">\n                    {/* The physical slit */}\n                    <div className=\"absolute top-4 bottom-4 w-1.5 bg-black rounded-full shadow-[inset_0_2px_5px_rgba(0,0,0,0.8)]\" />\n\n                    <Slider\n                        orientation=\"vertical\"\n                        min={0}\n                        max={100}\n                        value={fader.value}\n                        onChange={(e) => setFaderValue(id, parseInt(e.target.value))}\n                        className=\"h-full w-full cursor-grab active:cursor-grabbing transition-all duration-700 ease-in-out opacity-0 z-20\"\n                        style={{ WebkitAppearance: 'slider-vertical' } as React.CSSProperties}\n                    />\n\n                    {/* Simulated 3D Fader Cap that tracks the input */}\n                    <div\n                        className=\"absolute w-8 h-12 bg-gradient-to-b from-[#b3b3b3] via-[#e6e6e6] to-[#808080] border border-[#d9d9d9] shadow-[0_5px_10px_rgba(0,0,0,0.6),_inset_0_1px_1px_rgba(255,255,255,0.8)] rounded-sm pointer-events-none z-10 transition-all duration-700 ease-in-out flex flex-col items-center justify-center transform-gpu\"\n                        style={{ bottom: `calc(${fader.value}% - 24px)` }}\n                    >\n                        {/* Grip lines */}\n                        <div className=\"w-6 h-0.5 bg-black/40 mb-1\" />\n                        <div className=\"w-6 h-1 bg-gradient-to-r from-[#e6e6e6] via-white to-[#e6e6e6]\" />\n                        <div className=\"w-6 h-0.5 bg-black/40 mt-1\" />\n                    </div>\n                </div>\n\n            </div>\n\n            {/* Scribble Strip (Channel Name) */}\n            <div className=\"w-full h-10 bg-[#e6e6e6] mt-1 rounded-b-md flex items-center justify-center shadow-[inset_0_2px_4px_rgba(0,0,0,0.1)] border-b border-[#999]\">\n                <span className=\"font-mono text-xs font-bold text-black opacity-80\">{fader.label}</span>\n            </div>\n\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAUO,SAAS,MAAM,EAAE,EAAE,EAAc;;IACpC,MAAM,QAAQ,IAAA,yKAAW;oCAAC,CAAC,QAAU,MAAM,MAAM,CAAC,IAAI;4CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;;;IACvE,MAAM,gBAAgB,IAAA,yKAAW;4CAAC,CAAC,QAAU,MAAM,aAAa;;IAChE,MAAM,aAAa,IAAA,yKAAW;yCAAC,CAAC,QAAU,MAAM,UAAU;;IAC1D,MAAM,aAAa,IAAA,yKAAW;yCAAC,CAAC,QAAU,MAAM,UAAU;;IAE1D,IAAI,CAAC,OAAO,OAAO;IAEnB,qBACI,gOAAC;QAAI,WAAU;;0BAGX,gOAAC;gBAAI,WAAU;;kCAGX,gOAAC;wBAAI,WAAU;;0CACX,gOAAC;gCAAI,WAAU;;;;;;0CACf,gOAAC;gCAAK,WAAU;0CAAyE,MAAM,GAAG,KAAK,IAAI,MAAM,MAAM,GAAG;;;;;;;;;;;;kCAG9H,gOAAC;wBACG,SAAS,IAAM,WAAW;wBAC1B,WAAW,CAAC,8EAA8E,EAAE,MAAM,QAAQ,GAAG,mFAAmF,kEAAkE;kCACrQ;;;;;;kCAGD,gOAAC;wBACG,SAAS,IAAM,WAAW;wBAC1B,WAAW,CAAC,8EAA8E,EAAE,MAAM,OAAO,GAAG,6EAA6E,kEAAkE;kCAC9P;;;;;;;;;;;;0BAML,gOAAC;gBAAI,WAAU;;kCAGX,gOAAC;wBAAI,WAAU;kCACV;4BAAC;4BAAI;4BAAG;4BAAG,CAAC;4BAAG,CAAC;4BAAI,CAAC;4BAAI,CAAC;4BAAI,CAAC;yBAAG,CAAC,GAAG,CAAC,CAAC,KAAK,kBAC1C,gOAAC;gCAAY,WAAU;0CAClB,CAAC,QAAQ,KAAK,QAAQ,MAAM,QAAQ,CAAC,EAAE,mBACpC,gOAAC;oCAAK,WAAW,CAAC,4CAA4C,EAAE,AAAC,QAAQ,IAAK,iBAAiB,oBAAoB;8CAC9G,QAAQ,CAAC,KAAK,OAAO;;;;;;+BAHxB;;;;;;;;;;kCAWlB,gOAAC;wBAAI,WAAU;kCACX,cAAA,gOAAC,8KAAO;4BAAC,OAAO,MAAM,OAAO,GAAG,IAAI,KAAK,KAAK,CAAC,MAAM,KAAK,GAAG;4BAAO,WAAU;;;;;;;;;;;kCAIlF,gOAAC;wBAAI,WAAU;;0CAEX,gOAAC;gCAAI,WAAU;;;;;;0CAEf,gOAAC,2KAAM;gCACH,aAAY;gCACZ,KAAK;gCACL,KAAK;gCACL,OAAO,MAAM,KAAK;gCAClB,UAAU,CAAC,IAAM,cAAc,IAAI,SAAS,EAAE,MAAM,CAAC,KAAK;gCAC1D,WAAU;gCACV,OAAO;oCAAE,kBAAkB;gCAAkB;;;;;;0CAIjD,gOAAC;gCACG,WAAU;gCACV,OAAO;oCAAE,QAAQ,CAAC,KAAK,EAAE,MAAM,KAAK,CAAC,SAAS,CAAC;gCAAC;;kDAGhD,gOAAC;wCAAI,WAAU;;;;;;kDACf,gOAAC;wCAAI,WAAU;;;;;;kDACf,gOAAC;wCAAI,WAAU;;;;;;;;;;;;;;;;;;;;;;;;0BAO3B,gOAAC;gBAAI,WAAU;0BACX,cAAA,gOAAC;oBAAK,WAAU;8BAAqD,MAAM,KAAK;;;;;;;;;;;;;;;;;AAKhG;GA3FgB;;QACE,yKAAW;QACH,yKAAW;QACd,yKAAW;QACX,yKAAW;;;KAJlB"}},
    {"offset": {"line": 486, "column": 0}, "map": {"version":3,"sources":["file:///Users/odgmusic/development/Da%20Graba_Studio/lib/audio-engine-bridge.ts"],"sourcesContent":["/**\n * @file audio-engine-bridge.ts\n * @description\n * This file serves as the Javascript/TypeScript bridge to a future C++ (JUCE) audio engine\n * compiled to WebAssembly (Wasm). \n * \n * The goal is to offload heavy DSP (Digital Signal Processing), precise timing,\n * and audio routing to the C++ core, while keeping the UI in React/Next.js.\n * This ensures \"zero-latency\" control (or as close to it as possible in the browser)\n * for the human interface.\n */\n\n// Define the interface for our future Wasm Audio Engine Module\nexport interface WasmAudioEngine {\n    // Initialization\n    init: (sampleRate: number, bufferSize: number) => boolean;\n\n    // Playback Control\n    play: () => void;\n    pause: () => void;\n    stop: () => void;\n    setPlayheadPosition: (seconds: number) => void;\n    getPlayheadPosition: () => number;\n\n    // Track Mixing Controls (Zero-latency parameter updates)\n    setTrackVolume: (trackId: string, gainLinear: number) => void;\n    setTrackPan: (trackId: string, panValue: number) => void; /* -1.0 to 1.0 */\n    setTrackMute: (trackId: string, isMuted: boolean) => void;\n    setTrackSolo: (trackId: string, isSolo: boolean) => void;\n\n    // Timeline Editing\n    addAudioClip: (trackId: string, clipId: string, audioDataPtr: number, dataSize: number, startTime: number) => boolean;\n    moveAudioClip: (clipId: string, newStartTime: number) => void;\n    trimAudioClip: (clipId: string, trimStart: number, trimEnd: number) => void;\n    setClipFade: (clipId: string, fadeType: 'in' | 'out', duration: number) => void;\n\n    // Analysis\n    getWaveformData: (clipId: string, resolution: number) => Float32Array;\n    getVUMeterLevel: (trackId: string) => number;\n}\n\n/**\n * Mock implementation of the WasmAudioEngine for development\n * before the actual C++/JUCE module is compiled and ready.\n */\nclass MockAudioEngine implements WasmAudioEngine {\n    private isPlaying = false;\n    private playhead = 0;\n\n    init(sampleRate: number, bufferSize: number) {\n        console.log(`[WasmBridge] Engine initialized at ${sampleRate}Hz, buffer: ${bufferSize}`);\n        return true;\n    }\n\n    play() {\n        this.isPlaying = true;\n        console.log(`[WasmBridge] Playback started.`);\n    }\n\n    pause() {\n        this.isPlaying = false;\n        console.log(`[WasmBridge] Playback paused.`);\n    }\n\n    stop() {\n        this.isPlaying = false;\n        this.playhead = 0;\n        console.log(`[WasmBridge] Playback stopped.`);\n    }\n\n    setPlayheadPosition(seconds: number) {\n        this.playhead = seconds;\n    }\n\n    getPlayheadPosition() {\n        // Mock incrementing playhead if playing\n        if (this.isPlaying) this.playhead += 0.05;\n        return this.playhead;\n    }\n\n    setTrackVolume(trackId: string, gainLinear: number) {\n        console.log(`[WasmBridge] Track ${trackId} volume set to ${gainLinear}`);\n    }\n\n    setTrackPan(trackId: string, panValue: number) {\n        console.log(`[WasmBridge] Track ${trackId} pan set to ${panValue}`);\n    }\n\n    setTrackMute(trackId: string, isMuted: boolean) {\n        console.log(`[WasmBridge] Track ${trackId} mute: ${isMuted}`);\n    }\n\n    setTrackSolo(trackId: string, isSolo: boolean) {\n        console.log(`[WasmBridge] Track ${trackId} solo: ${isSolo}`);\n    }\n\n    addAudioClip(trackId: string, clipId: string, audioDataPtr: number, dataSize: number, startTime: number) {\n        console.log(`[WasmBridge] Clip ${clipId} added to Track ${trackId} at ${startTime}s`);\n        return true;\n    }\n\n    moveAudioClip(clipId: string, newStartTime: number) {\n        console.log(`[WasmBridge] Clip ${clipId} moved to ${newStartTime}s`);\n    }\n\n    trimAudioClip(clipId: string, trimStart: number, trimEnd: number) {\n        console.log(`[WasmBridge] Clip ${clipId} trimmed: start=${trimStart}, end=${trimEnd}`);\n    }\n\n    setClipFade(clipId: string, fadeType: 'in' | 'out', duration: number) {\n        console.log(`[WasmBridge] Clip ${clipId} fade ${fadeType} set to ${duration}s`);\n    }\n\n    getWaveformData(clipId: string, resolution: number) {\n        // Return dummy waveform data for the UI to render\n        const dummyData = new Float32Array(resolution);\n        for (let i = 0; i < resolution; i++) {\n            dummyData[i] = Math.sin(i * 0.1) * 0.5 + 0.5; // Dummy sine wave 0-1\n        }\n        return dummyData;\n    }\n\n    getVUMeterLevel(trackId: string) {\n        return this.isPlaying ? Math.random() : 0.0;\n    }\n}\n\n// Export a singleton instance of the engine\nexport const audioEngine = new MockAudioEngine();\n"],"names":[],"mappings":"AAAA;;;;;;;;;;CAUC,GAED,+DAA+D;;;;;AA6B/D;;;CAGC,GACD,MAAM;IACM,YAAY,MAAM;IAClB,WAAW,EAAE;IAErB,KAAK,UAAkB,EAAE,UAAkB,EAAE;QACzC,QAAQ,GAAG,CAAC,CAAC,mCAAmC,EAAE,WAAW,YAAY,EAAE,YAAY;QACvF,OAAO;IACX;IAEA,OAAO;QACH,IAAI,CAAC,SAAS,GAAG;QACjB,QAAQ,GAAG,CAAC,CAAC,8BAA8B,CAAC;IAChD;IAEA,QAAQ;QACJ,IAAI,CAAC,SAAS,GAAG;QACjB,QAAQ,GAAG,CAAC,CAAC,6BAA6B,CAAC;IAC/C;IAEA,OAAO;QACH,IAAI,CAAC,SAAS,GAAG;QACjB,IAAI,CAAC,QAAQ,GAAG;QAChB,QAAQ,GAAG,CAAC,CAAC,8BAA8B,CAAC;IAChD;IAEA,oBAAoB,OAAe,EAAE;QACjC,IAAI,CAAC,QAAQ,GAAG;IACpB;IAEA,sBAAsB;QAClB,wCAAwC;QACxC,IAAI,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,QAAQ,IAAI;QACrC,OAAO,IAAI,CAAC,QAAQ;IACxB;IAEA,eAAe,OAAe,EAAE,UAAkB,EAAE;QAChD,QAAQ,GAAG,CAAC,CAAC,mBAAmB,EAAE,QAAQ,eAAe,EAAE,YAAY;IAC3E;IAEA,YAAY,OAAe,EAAE,QAAgB,EAAE;QAC3C,QAAQ,GAAG,CAAC,CAAC,mBAAmB,EAAE,QAAQ,YAAY,EAAE,UAAU;IACtE;IAEA,aAAa,OAAe,EAAE,OAAgB,EAAE;QAC5C,QAAQ,GAAG,CAAC,CAAC,mBAAmB,EAAE,QAAQ,OAAO,EAAE,SAAS;IAChE;IAEA,aAAa,OAAe,EAAE,MAAe,EAAE;QAC3C,QAAQ,GAAG,CAAC,CAAC,mBAAmB,EAAE,QAAQ,OAAO,EAAE,QAAQ;IAC/D;IAEA,aAAa,OAAe,EAAE,MAAc,EAAE,YAAoB,EAAE,QAAgB,EAAE,SAAiB,EAAE;QACrG,QAAQ,GAAG,CAAC,CAAC,kBAAkB,EAAE,OAAO,gBAAgB,EAAE,QAAQ,IAAI,EAAE,UAAU,CAAC,CAAC;QACpF,OAAO;IACX;IAEA,cAAc,MAAc,EAAE,YAAoB,EAAE;QAChD,QAAQ,GAAG,CAAC,CAAC,kBAAkB,EAAE,OAAO,UAAU,EAAE,aAAa,CAAC,CAAC;IACvE;IAEA,cAAc,MAAc,EAAE,SAAiB,EAAE,OAAe,EAAE;QAC9D,QAAQ,GAAG,CAAC,CAAC,kBAAkB,EAAE,OAAO,gBAAgB,EAAE,UAAU,MAAM,EAAE,SAAS;IACzF;IAEA,YAAY,MAAc,EAAE,QAAsB,EAAE,QAAgB,EAAE;QAClE,QAAQ,GAAG,CAAC,CAAC,kBAAkB,EAAE,OAAO,MAAM,EAAE,SAAS,QAAQ,EAAE,SAAS,CAAC,CAAC;IAClF;IAEA,gBAAgB,MAAc,EAAE,UAAkB,EAAE;QAChD,kDAAkD;QAClD,MAAM,YAAY,IAAI,aAAa;QACnC,IAAK,IAAI,IAAI,GAAG,IAAI,YAAY,IAAK;YACjC,SAAS,CAAC,EAAE,GAAG,KAAK,GAAG,CAAC,IAAI,OAAO,MAAM,KAAK,sBAAsB;QACxE;QACA,OAAO;IACX;IAEA,gBAAgB,OAAe,EAAE;QAC7B,OAAO,IAAI,CAAC,SAAS,GAAG,KAAK,MAAM,KAAK;IAC5C;AACJ;AAGO,MAAM,cAAc,IAAI"}},
    {"offset": {"line": 577, "column": 0}, "map": {"version":3,"sources":["file:///Users/odgmusic/development/Da%20Graba_Studio/components/daw/AudioTimeline.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { Play, Pause, Scissors, MousePointer2 } from 'lucide-react';\nimport { audioEngine } from '@/lib/audio-engine-bridge';\n\ninterface AudioClip {\n    id: string;\n    trackId: string;\n    startTime: number; // in seconds\n    duration: number; // in seconds\n    color: string;\n    name: string;\n}\n\nexport function AudioTimeline() {\n    const [isPlaying, setIsPlaying] = useState(false);\n    const [playhead, setPlayhead] = useState(0); // seconds\n    const canvasRef = useRef<HTMLCanvasElement>(null);\n    const containerRef = useRef<HTMLDivElement>(null);\n    const animationRef = useRef<number | null>(null);\n\n    // Timeline scale (pixels per second)\n    const pixelsPerSecond = 50;\n    const timelineDuration = 180; // 3 minutes total for now\n    const timelineWidth = timelineDuration * pixelsPerSecond;\n\n    // Mock clips for visualization\n    const [clips, setClips] = useState<AudioClip[]>([\n        { id: 'c1', trackId: 't1', startTime: 5, duration: 15, color: '#00F0FF', name: 'vocal_take_1.wav' },\n        { id: 'c2', trackId: 't2', startTime: 0, duration: 60, color: '#FF6B00', name: 'beat_render.wav' },\n    ]);\n\n    const [draggingClip, setDraggingClip] = useState<string | null>(null);\n    const [dragOffset, setDragOffset] = useState(0);\n\n    // --- Playhead Animation Loop ---\n    const loop = () => {\n        if (isPlaying) {\n            setPlayhead(audioEngine.getPlayheadPosition());\n        }\n        animationRef.current = requestAnimationFrame(loop);\n    };\n\n    useEffect(() => {\n        animationRef.current = requestAnimationFrame(loop);\n        return () => {\n            if (animationRef.current) cancelAnimationFrame(animationRef.current);\n        };\n    }, [isPlaying]);\n\n    const togglePlay = () => {\n        if (isPlaying) {\n            audioEngine.pause();\n            setIsPlaying(false);\n        } else {\n            audioEngine.play();\n            setIsPlaying(true);\n        }\n    };\n\n    // --- Drag and Drop Logic ---\n    const handleMouseDown = (e: React.MouseEvent, clip: AudioClip) => {\n        e.stopPropagation();\n        setDraggingClip(clip.id);\n\n        // Calculate where inside the clip we clicked (in pixels)\n        const rect = (e.target as HTMLElement).getBoundingClientRect();\n        const offsetX = e.clientX - rect.left;\n        setDragOffset(offsetX);\n    };\n\n    const handleMouseMove = (e: React.MouseEvent) => {\n        if (!draggingClip || !containerRef.current) return;\n\n        const containerRect = containerRef.current.getBoundingClientRect();\n\n        // Calculate new X position relative to container, accounting for scroll\n        const newX = e.clientX - containerRect.left + containerRef.current.scrollLeft - dragOffset;\n\n        // Convert X pixels back to seconds\n        const newStartTime = Math.max(0, newX / pixelsPerSecond);\n\n        setClips(prev => prev.map(c =>\n            c.id === draggingClip ? { ...c, startTime: newStartTime } : c\n        ));\n    };\n\n    const handleMouseUp = () => {\n        if (draggingClip) {\n            // Inform the engine of the final move\n            const clip = clips.find(c => c.id === draggingClip);\n            if (clip) {\n                audioEngine.moveAudioClip(clip.id, clip.startTime);\n            }\n            setDraggingClip(null);\n        }\n    };\n\n    // --- Timeline Click (Move Playhead) ---\n    const handleTimelineClick = (e: React.MouseEvent) => {\n        if (!containerRef.current || draggingClip) return;\n        const containerRect = containerRef.current.getBoundingClientRect();\n        const clickX = e.clientX - containerRect.left + containerRef.current.scrollLeft;\n        const newTime = clickX / pixelsPerSecond;\n\n        audioEngine.setPlayheadPosition(newTime);\n        setPlayhead(newTime);\n    };\n\n    // --- Waveform Rendering ---\n    useEffect(() => {\n        const canvas = canvasRef.current;\n        if (!canvas) return;\n        const ctx = canvas.getContext('2d');\n        if (!ctx) return;\n\n        // Clear canvas\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n        clips.forEach(clip => {\n            const x = clip.startTime * pixelsPerSecond;\n            const width = clip.duration * pixelsPerSecond;\n\n            // Get mock waveform from engine\n            const waveform = audioEngine.getWaveformData(clip.id, Math.floor(width));\n\n            ctx.beginPath();\n            ctx.strokeStyle = clip.color;\n            ctx.lineWidth = 1.5;\n            ctx.moveTo(x, 25); // Center line (assuming 50px height track)\n\n            for (let i = 0; i < width; i++) {\n                // Waveform values are 0-1, map to -20 to 20 pixels amplitude\n                const amplitude = (waveform[i] - 0.5) * 40;\n                ctx.lineTo(x + i, 25 + amplitude);\n            }\n            ctx.stroke();\n        });\n\n    }, [clips, pixelsPerSecond]);\n\n\n    return (\n        <div className=\"flex flex-col w-full h-full bg-[#18181A] border border-[#222] shadow-[inset_0_5px_20px_rgba(0,0,0,0.8)] rounded-xl overflow-hidden font-mono select-none\">\n\n            {/* Toolbar */}\n            <div className=\"h-10 border-b border-[#222] bg-[#111113] flex items-center px-4 gap-4 shadow-sm z-20 relative\">\n                <button onClick={togglePlay} className={`w-8 h-8 rounded flex items-center justify-center transition-colors ${isPlaying ? 'bg-cyan-glow/20 text-cyan-glow border border-cyan-glow' : 'hover:bg-[#222] text-[#AAA]'}`}>\n                    {isPlaying ? <Pause size={14} fill=\"currentColor\" /> : <Play size={14} fill=\"currentColor\" className=\"ml-0.5\" />}\n                </button>\n\n                <div className=\"w-px h-4 bg-[#333]\" />\n\n                <div className=\"flex gap-1\">\n                    <button className=\"w-8 h-8 rounded flex items-center justify-center hover:bg-[#222] text-[#AAA] active:text-cyan-glow\">\n                        <MousePointer2 size={14} />\n                    </button>\n                    <button className=\"w-8 h-8 rounded flex items-center justify-center hover:bg-[#222] text-[#AAA] active:text-red-500\">\n                        <Scissors size={14} />\n                    </button>\n                </div>\n\n                <div className=\"ml-auto text-cyan-glow text-xs font-bold tracking-widest bg-black px-3 py-1 rounded shadow-inner border border-[#222]\">\n                    {Math.floor(playhead / 60).toString().padStart(2, '0')}:\n                    {Math.floor(playhead % 60).toString().padStart(2, '0')}.\n                    {Math.floor((playhead % 1) * 100).toString().padStart(2, '0')}\n                </div>\n            </div>\n\n            {/* Timeline Scrollable Area */}\n            <div\n                ref={containerRef}\n                className=\"flex-1 overflow-auto relative cursor-text\"\n                onMouseMove={handleMouseMove}\n                onMouseUp={handleMouseUp}\n                onMouseLeave={handleMouseUp}\n                onClick={handleTimelineClick}\n            >\n                {/* The sprawling timeline width */}\n                <div style={{ width: `${timelineWidth}px`, height: '100%' }} className=\"relative bg-[#1A1A1C]\">\n\n                    {/* Time Ruler (Seconds) */}\n                    <div className=\"absolute top-0 left-0 w-full h-6 border-b border-[#2A2A2D] bg-[#111] opacity-90 z-10 flex\">\n                        {Array.from({ length: timelineDuration }).map((_, i) => (\n                            <div key={`ruler-${i}`} className=\"h-full border-l border-[#333] relative\" style={{ width: `${pixelsPerSecond}px` }}>\n                                {i % 5 === 0 && <span className=\"absolute top-1 left-1 text-[8px] text-[#666]\">{i}s</span>}\n                            </div>\n                        ))}\n                    </div>\n\n                    {/* Background Grid Lines rendering over tracks */}\n                    <div className=\"absolute top-6 left-0 w-full bottom-0 flex pointer-events-none opacity-20\">\n                        {Array.from({ length: timelineDuration }).map((_, i) => (\n                            <div key={`grid-${i}`} className=\"h-full border-l border-[#444]\" style={{ width: `${pixelsPerSecond}px` }} />\n                        ))}\n                    </div>\n\n                    {/* Tracks Definition Container */}\n                    <div className=\"absolute top-6 left-0 w-full flex flex-col pt-2 gap-1 pb-4\">\n\n                        {/* Track 1 (e.g. Vocals) */}\n                        <div className=\"h-[60px] w-full bg-[#202022] border-y border-[#18181A] relative shadow-inner\">\n                            {/* Waveform Canvas Layer (draws all waves, positioned absolutely) */}\n                            {/* We put one canvas spanning the whole timeline width to render the Web Audio visualization */}\n                            <canvas\n                                ref={canvasRef}\n                                width={timelineWidth}\n                                height={60}\n                                className=\"absolute inset-0 pointer-events-none opacity-60 mix-blend-screen\"\n                                style={{ top: 0 }}\n                            />\n\n                            {/* Clips Interaction Layer */}\n                            {clips.filter(c => c.trackId === 't1').map(clip => (\n                                <div\n                                    key={clip.id}\n                                    onMouseDown={(e) => handleMouseDown(e, clip)}\n                                    className={`absolute top-1 bottom-1 rounded-sm border-2 cursor-grab active:cursor-grabbing backdrop-blur-sm transition-shadow ${draggingClip === clip.id ? 'z-20 shadow-[0_5px_15px_rgba(0,0,0,0.5)] border-white/80' : 'z-10 shadow-sm'}`}\n                                    style={{\n                                        left: `${clip.startTime * pixelsPerSecond}px`,\n                                        width: `${clip.duration * pixelsPerSecond}px`,\n                                        backgroundColor: `${clip.color}20`, // 20% opacity background\n                                        borderColor: `${clip.color}80`  // 80% opacity border\n                                    }}\n                                >\n                                    <div className=\"bg-[#111]/80 px-1 py-0.5 text-[8px] truncate text-[#AAA] rounded-br-sm inline-block max-w-full\">\n                                        {clip.name}\n                                    </div>\n\n                                    {/* Left/Right Fade handles (visual only for now) */}\n                                    <div className=\"absolute top-0 left-0 w-2 h-2 bg-white/50 clip-path-triangle-tl opacity-0 hover:opacity-100 transition-opacity cursor-ew-resize\" />\n                                    <div className=\"absolute top-0 right-0 w-2 h-2 bg-white/50 clip-path-triangle-tr opacity-0 hover:opacity-100 transition-opacity cursor-ew-resize\" />\n                                </div>\n                            ))}\n                        </div>\n\n                        {/* Track 2 (e.g. Beat) */}\n                        <div className=\"h-[60px] w-full bg-[#202022] border-y border-[#18181A] relative shadow-inner\">\n                            {/* Clips Interaction Layer */}\n                            {clips.filter(c => c.trackId === 't2').map(clip => (\n                                <div\n                                    key={clip.id}\n                                    onMouseDown={(e) => handleMouseDown(e, clip)}\n                                    className={`absolute top-1 bottom-1 rounded-sm border-2 cursor-grab active:cursor-grabbing backdrop-blur-sm transition-shadow ${draggingClip === clip.id ? 'z-20 shadow-[0_5px_15px_rgba(0,0,0,0.5)] border-white/80' : 'z-10 shadow-sm'}`}\n                                    style={{\n                                        left: `${clip.startTime * pixelsPerSecond}px`,\n                                        width: `${clip.duration * pixelsPerSecond}px`,\n                                        backgroundColor: `${clip.color}20`,\n                                        borderColor: `${clip.color}80`\n                                    }}\n                                >\n                                    <div className=\"bg-[#111]/80 px-1 py-0.5 text-[8px] truncate text-[#AAA] rounded-br-sm inline-block max-w-full\">\n                                        {clip.name}\n                                    </div>\n                                </div>\n                            ))}\n                        </div>\n\n                    </div>\n\n                    {/* Playhead Marker */}\n                    <div\n                        className=\"absolute top-0 bottom-0 w-px bg-yellow-400 z-30 pointer-events-none shadow-[0_0_10px_rgba(250,204,21,0.8)]\"\n                        style={{ left: `${playhead * pixelsPerSecond}px` }}\n                    >\n                        <div className=\"absolute -top-1 -left-1.5 w-0 h-0 border-l-[6px] border-r-[6px] border-t-[8px] border-l-transparent border-r-transparent border-t-yellow-400\" />\n                    </div>\n\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1027, "column": 0}, "map": {"version":3,"sources":["file:///Users/odgmusic/development/Da%20Graba_Studio/components/daw/DawTrackControl.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Volume2, Power } from 'lucide-react';\nimport { audioEngine } from '@/lib/audio-engine-bridge';\n\ninterface DawTrackControlProps {\n    trackId: string;\n    trackName: string;\n    color: string;\n}\n\nexport function DawTrackControl({ trackId, trackName, color }: DawTrackControlProps) {\n    const [volume, setVolume] = useState(80); // 0-100\n    const [pan, setPan] = useState(0); // -100 (L) to 100 (R)\n    const [isMuted, setIsMuted] = useState(false);\n    const [isSolo, setIsSolo] = useState(false);\n\n    // Communicate changes to the Wasm Bridge\n    useEffect(() => { audioEngine.setTrackVolume(trackId, volume / 100); }, [volume, trackId]);\n    useEffect(() => { audioEngine.setTrackPan(trackId, pan / 100); }, [pan, trackId]);\n    useEffect(() => { audioEngine.setTrackMute(trackId, isMuted); }, [isMuted, trackId]);\n    useEffect(() => { audioEngine.setTrackSolo(trackId, isSolo); }, [isSolo, trackId]);\n\n    // Simple Circular Knob Renderer (SVG)\n    const renderKnob = (\n        value: number,\n        min: number,\n        max: number,\n        label: string,\n        onChange: (v: number) => void,\n        isBipolar: boolean = false\n    ) => {\n        // Map value to angle (-135 to 135 deg)\n        const percent = (value - min) / (max - min);\n        const angle = -135 + percent * 270;\n\n        // Custom Mouse Drag logic for knobs\n        const handleMouseDown = (e: React.MouseEvent) => {\n            e.preventDefault();\n            const startY = e.clientY;\n            const startVal = value;\n\n            const onMouseMove = (moveEvent: MouseEvent) => {\n                const deltaY = startY - moveEvent.clientY; // Up is positive\n                // Sensitivity: 1 pixel move = 1 unit change\n                let newVal = startVal + deltaY;\n                newVal = Math.max(min, Math.min(max, newVal));\n                onChange(newVal);\n            };\n\n            const onMouseUp = () => {\n                window.removeEventListener('mousemove', onMouseMove);\n                window.removeEventListener('mouseup', onMouseUp);\n            };\n\n            window.addEventListener('mousemove', onMouseMove);\n            window.addEventListener('mouseup', onMouseUp);\n        };\n\n        return (\n            <div className=\"flex flex-col items-center gap-1 group\">\n                <div\n                    className=\"w-8 h-8 rounded-full bg-[#18181A] shadow-[inset_0_2px_4px_rgba(0,0,0,0.8),0_1px_1px_rgba(255,255,255,0.05)] border border-[#222] relative flex items-center justify-center cursor-ns-resize\"\n                    onMouseDown={handleMouseDown}\n                >\n                    {/* Outline track */}\n                    <svg className=\"absolute inset-0 w-full h-full -rotate-[135deg]\" viewBox=\"0 0 32 32\">\n                        <circle cx=\"16\" cy=\"16\" r=\"12\" fill=\"none\" stroke=\"#222\" strokeWidth=\"2\" strokeDasharray=\"56.5\" />\n                        {isBipolar ? (\n                            // Pan shows center out\n                            <circle cx=\"16\" cy=\"16\" r=\"12\" fill=\"none\" stroke={color} strokeWidth=\"2\" strokeDasharray=\"56.5\" strokeDashoffset={56.5 - (Math.abs(percent - 0.5) * 56.5)} className={`transition-all ${percent > 0.5 ? 'origin-center rotate-[135deg]' : 'origin-center rotate-[-45deg]'}`} style={{ transformOrigin: 'center', transform: percent < 0.5 ? `rotate(${percent * 270}deg)` : 'rotate(135deg)' }} /> // Simplified pan visual for now\n                        ) : (\n                            // Volume shows bottom up\n                            <circle cx=\"16\" cy=\"16\" r=\"12\" fill=\"none\" stroke={color} strokeWidth=\"2\" strokeDasharray=\"56.5\" strokeDashoffset={56.5 - (percent * 56.5)} className=\"transition-all\" />\n                        )}\n                    </svg>\n\n                    {/* Indicator pointer */}\n                    <div\n                        className=\"absolute w-full h-full\"\n                        style={{ transform: `rotate(${angle}deg)` }}\n                    >\n                        <div className=\"mx-auto mt-1 w-1 h-2 rounded bg-white shadow-[0_0_2px_rgba(255,255,255,0.8)]\" />\n                    </div>\n                </div>\n                <span className=\"text-[8px] font-mono text-[#666] uppercase group-hover:text-[#AAA] transition-colors\">{label}</span>\n            </div>\n        );\n    };\n\n    return (\n        <div className=\"w-[200px] h-[60px] bg-[#1C1C1E] border-r border-y border-[#111] flex items-center justify-between px-2 shadow-inner shrink-0 z-30\">\n            {/* Left: Status / Name */}\n            <div className=\"flex flex-col gap-1 w-20\">\n                <span className=\"text-[10px] font-bold truncate\" style={{ color }}>{trackName}</span>\n                <div className=\"flex gap-1\">\n                    {/* Mute Button */}\n                    <button\n                        onClick={() => setIsMuted(!isMuted)}\n                        className={`px-1.5 py-0.5 rounded-sm text-[8px] font-bold tracking-widest transition-all ${isMuted ? 'bg-red-500/20 text-red-500 border border-red-500/50 glow-red' : 'bg-[#222] text-[#666] border border-[#333]'}`}\n                    >\n                        M\n                    </button>\n                    {/* Solo Button */}\n                    <button\n                        onClick={() => setIsSolo(!isSolo)}\n                        className={`px-1.5 py-0.5 rounded-sm text-[8px] font-bold tracking-widest transition-all ${isSolo ? 'bg-yellow-500/20 text-yellow-500 border border-yellow-500/50 glow-yellow' : 'bg-[#222] text-[#666] border border-[#333]'}`}\n                    >\n                        S\n                    </button>\n                </div>\n            </div>\n\n            {/* Right: Knobs */}\n            <div className=\"flex gap-2 items-center\">\n                {renderKnob(pan, -100, 100, 'PAN', setPan, true)}\n                {renderKnob(volume, 0, 100, 'VOL', setVolume, false)}\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1283, "column": 0}, "map": {"version":3,"sources":["file:///Users/odgmusic/development/Da%20Graba_Studio/app/studio/page.tsx"],"sourcesContent":["'use client';\n\nimport { useDAWStore } from '@/store/useDAWStore';\nimport { modalClient } from '@/lib/modal-client';\nimport { Fader } from '@/components/daw/Fader';\nimport { AudioTimeline } from '@/components/daw/AudioTimeline';\nimport { DawTrackControl } from '@/components/daw/DawTrackControl';\nimport { Settings2, Activity } from 'lucide-react';\n\nexport default function Studio() {\n    const faders = useDAWStore((state) => state.faders);\n    const isTraining = useDAWStore((state) => state.isTraining);\n    const isMixerOpen = useDAWStore((state) => state.isMixerOpen);\n    const mixerBank = useDAWStore((state) => state.mixerBank);\n\n    const setTrainingStatus = useDAWStore((state) => state.setTrainingStatus);\n    const setFaderValue = useDAWStore((state) => state.setFaderValue);\n    const toggleMixer = useDAWStore((state) => state.toggleMixer);\n    const setMixerBank = useDAWStore((state) => state.setMixerBank);\n\n    const handleAutoMix = async () => {\n        setTrainingStatus(true);\n        try {\n            const response = await modalClient.process_vocal_cloning();\n\n            if (response.success) {\n                // Auto mix positions from Modal AI\n                setFaderValue('vocal', response.mixParameters.vocalLevel);\n                setFaderValue('beat', response.mixParameters.beatLevel);\n                setFaderValue('bass', 65);\n                setFaderValue('fx', 50);\n            }\n        } catch (error) {\n            console.error(\"Auto Mix Modal training failed:\", error);\n        } finally {\n            setTrainingStatus(false);\n        }\n    };\n\n    // Slice 16 faders depending on the active bank\n    const activeFaders = mixerBank === 1 ? faders.slice(0, 16) : faders.slice(16, 32);\n\n    return (\n        <div className=\"flex flex-col h-full w-full pointer-events-auto bg-[#0A0A0C]\">\n\n            {/* TOP HEADER: Branding & Global Actions */}\n            <div className=\"h-16 flex items-center justify-between px-8 border-b border-[#222] bg-[#111113] shadow-md z-30 shrink-0\">\n                <div className=\"flex items-center gap-4\">\n                    <div className=\"border border-cyan-glow/30 px-3 py-1 rounded bg-black/50 shadow-[0_0_10px_rgba(0,240,255,0.1)]\">\n                        <h1 className=\"text-sm font-sans tracking-widest text-white\">\n                            DA GRABA <span className=\"font-light text-silver-dark\">DAW</span>\n                        </h1>\n                    </div>\n                </div>\n\n                <div className=\"flex items-center gap-4\">\n                    <button\n                        onClick={handleAutoMix}\n                        disabled={isTraining}\n                        className=\"flex items-center gap-2 bg-black hover:bg-[#1A1A1A] border border-cyan-glow/50 text-cyan-glow px-4 py-1.5 rounded shadow-[0_0_10px_rgba(0,240,255,0.2)] transition-colors disabled:opacity-50 text-xs font-bold tracking-widest\"\n                    >\n                        <Activity size={12} />\n                        AUTO-MEZCLA IA\n                    </button>\n\n                    {/* MIXER TOGGLE BUTTON */}\n                    <button\n                        onClick={toggleMixer}\n                        className={`px-4 py-1.5 rounded border text-xs font-bold tracking-widest transition-colors shadow-sm ${isMixerOpen ? 'bg-primary border-primary text-black' : 'bg-[#1A1A1A] border-[#333] text-silver-dark hover:bg-[#222]'\n                            }`}\n                    >\n                        MIX\n                    </button>\n\n                    <button className=\"text-[#666] hover:text-[#AAA]\">\n                        <Settings2 size={16} />\n                    </button>\n                </div>\n            </div>\n\n            {/* CENTER: Audio Timeline & Track Control Column */}\n            <div className={`flex flex-1 w-full px-8 py-2 gap-4 z-20 max-w-[2000px] mx-auto overflow-hidden transition-all duration-300 ${isMixerOpen ? 'min-h-[250px]' : 'h-full pb-8'}`}>\n                {/* Left Column: Track Controls */}\n                <div className=\"w-[200px] bg-[#111113]/80 backdrop-blur-md border border-[#333] flex flex-col overflow-y-auto shadow-2xl rounded-md shrink-0 py-4\">\n                    <DawTrackControl trackId=\"t1\" trackName=\"Khea - Miedo Vocals.wav\" color=\"#00F0FF\" />\n                    <DawTrackControl trackId=\"t2\" trackName=\"Beat Master Bounce_v2.wav\" color=\"#FF6B00\" />\n                </div>\n\n                {/* Main Timeline Canvas */}\n                <div className=\"flex-1 bg-[#1A1A1C]/90 backdrop-blur-md relative border border-[#333] shadow-2xl rounded-md overflow-hidden\">\n                    <AudioTimeline />\n                </div>\n            </div>\n\n            {/* BOTTOM: Analog Mix Desk (Conditional Rendering) */}\n            {isMixerOpen && (\n                <div className=\"w-full mt-auto perspective-container flex flex-col items-center justify-end z-10 pb-0\">\n\n                    {/* Mixer Toolbar (Bank Switch) */}\n                    <div className=\"w-full max-w-7xl px-8 flex justify-end mb-2 relative z-20\">\n                        <div className=\"flex bg-[#111] p-1 border border-[#333] rounded shadow-[0_5px_15px_rgba(0,0,0,0.5)]\">\n                            <button\n                                onClick={() => setMixerBank(1)}\n                                className={`px-4 py-1 text-[10px] font-bold tracking-widest rounded-sm ${mixerBank === 1 ? 'bg-cyan-glow/20 text-cyan-glow border border-cyan-glow/50' : 'text-[#666] hover:bg-[#222]'}`}\n                            >\n                                BANK 1-16\n                            </button>\n                            <button\n                                onClick={() => setMixerBank(2)}\n                                className={`px-4 py-1 text-[10px] font-bold tracking-widest rounded-sm ${mixerBank === 2 ? 'bg-cyan-glow/20 text-cyan-glow border border-cyan-glow/50' : 'text-[#666] hover:bg-[#222]'}`}\n                            >\n                                BANK 17-32\n                            </button>\n                        </div>\n                    </div>\n\n                    <div className=\"w-[130vw] min-w-[1600px] bg-[#1a1a1a] console-desk border-t-4 border-[#333] shadow-[0_-10px_50px_rgba(0,0,0,0.9)] relative\">\n                        <div className=\"absolute inset-0 bg-[url('/noise.png')] opacity-40 mix-blend-overlay pointer-events-none\" />\n\n                        <div className=\"max-w-7xl mx-auto flex justify-center py-8 px-4 relative z-10 bg-[#0a0a0a] rounded-t-sm border border-[#222] shadow-[inset_0_10px_20px_rgba(0,0,0,0.8)]\">\n\n                            {/* Active Faders (16 channels across the board) */}\n                            <div className=\"flex gap-1.5 w-full justify-center pb-4\">\n                                {activeFaders.map((fader) => (\n                                    <Fader key={fader.id} id={fader.id} />\n                                ))}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            )}\n\n            {/* FULLSCREEN TRAINING / PROCESSING OVERLAY */}\n            {isTraining && (\n                <div className=\"fixed inset-0 z-50 flex flex-col items-center justify-center bg-black/80 backdrop-blur-md pointer-events-auto\">\n                    {/* The spectacular glowing DG Logo (Circular for the new logo) */}\n                    <div className=\"w-64 h-64 rounded-full relative flex items-center justify-center shadow-[0_0_100px_rgba(255,107,0,0.8)] animate-pulse overflow-hidden border border-orange-500/30\">\n                        {/* Outer spinner ring */}\n                        <div className=\"absolute inset-0 border-8 border-t-white border-r-transparent border-b-white/10 border-l-transparent rounded-full animate-spin z-10\" />\n                        <img src=\"/logo_circular.png\" alt=\"DA GRABA Loading Logo\" className=\"w-full h-full object-cover scale-110\" />\n                    </div>\n\n                    <div className=\"mt-8 flex flex-col items-center gap-2\">\n                        <div className=\"flex items-center gap-3\">\n                            <Activity size={16} className=\"text-primary animate-bounce\" />\n                            <h2 className=\"text-xl font-bold tracking-widest text-[#E0E0E0]\">PROCESANDO EN MODAL</h2>\n                        </div>\n                        <p className=\"text-silver-dark text-sm font-mono tracking-wide max-w-sm text-center\">\n                            Aplicando clonaciÃ³n vocal y auto-mezclando niveles en la consola...\n                        </p>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;;;AAPA;;;;;;;AASe,SAAS;;IACpB,MAAM,SAAS,IAAA,yKAAW;sCAAC,CAAC,QAAU,MAAM,MAAM;;IAClD,MAAM,aAAa,IAAA,yKAAW;0CAAC,CAAC,QAAU,MAAM,UAAU;;IAC1D,MAAM,cAAc,IAAA,yKAAW;2CAAC,CAAC,QAAU,MAAM,WAAW;;IAC5D,MAAM,YAAY,IAAA,yKAAW;yCAAC,CAAC,QAAU,MAAM,SAAS;;IAExD,MAAM,oBAAoB,IAAA,yKAAW;iDAAC,CAAC,QAAU,MAAM,iBAAiB;;IACxE,MAAM,gBAAgB,IAAA,yKAAW;6CAAC,CAAC,QAAU,MAAM,aAAa;;IAChE,MAAM,cAAc,IAAA,yKAAW;2CAAC,CAAC,QAAU,MAAM,WAAW;;IAC5D,MAAM,eAAe,IAAA,yKAAW;4CAAC,CAAC,QAAU,MAAM,YAAY;;IAE9D,MAAM,gBAAgB;QAClB,kBAAkB;QAClB,IAAI;YACA,MAAM,WAAW,MAAM,2KAAW,CAAC,qBAAqB;YAExD,IAAI,SAAS,OAAO,EAAE;gBAClB,mCAAmC;gBACnC,cAAc,SAAS,SAAS,aAAa,CAAC,UAAU;gBACxD,cAAc,QAAQ,SAAS,aAAa,CAAC,SAAS;gBACtD,cAAc,QAAQ;gBACtB,cAAc,MAAM;YACxB;QACJ,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,mCAAmC;QACrD,SAAU;YACN,kBAAkB;QACtB;IACJ;IAEA,+CAA+C;IAC/C,MAAM,eAAe,cAAc,IAAI,OAAO,KAAK,CAAC,GAAG,MAAM,OAAO,KAAK,CAAC,IAAI;IAE9E,qBACI,gOAAC;QAAI,WAAU;;0BAGX,gOAAC;gBAAI,WAAU;;kCACX,gOAAC;wBAAI,WAAU;kCACX,cAAA,gOAAC;4BAAI,WAAU;sCACX,cAAA,gOAAC;gCAAG,WAAU;;oCAA+C;kDAChD,gOAAC;wCAAK,WAAU;kDAA8B;;;;;;;;;;;;;;;;;;;;;;kCAKnE,gOAAC;wBAAI,WAAU;;0CACX,gOAAC;gCACG,SAAS;gCACT,UAAU;gCACV,WAAU;;kDAEV,gOAAC,4PAAQ;wCAAC,MAAM;;;;;;oCAAM;;;;;;;0CAK1B,gOAAC;gCACG,SAAS;gCACT,WAAW,CAAC,yFAAyF,EAAE,cAAc,yCAAyC,+DACxJ;0CACT;;;;;;0CAID,gOAAC;gCAAO,WAAU;0CACd,cAAA,gOAAC,mQAAS;oCAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;0BAM7B,gOAAC;gBAAI,WAAW,CAAC,2GAA2G,EAAE,cAAc,kBAAkB,eAAe;;kCAEzK,gOAAC;wBAAI,WAAU;;0CACX,gOAAC,8LAAe;gCAAC,SAAQ;gCAAK,WAAU;gCAA0B,OAAM;;;;;;0CACxE,gOAAC,8LAAe;gCAAC,SAAQ;gCAAK,WAAU;gCAA4B,OAAM;;;;;;;;;;;;kCAI9E,gOAAC;wBAAI,WAAU;kCACX,cAAA,gOAAC,0LAAa;;;;;;;;;;;;;;;;YAKrB,6BACG,gOAAC;gBAAI,WAAU;;kCAGX,gOAAC;wBAAI,WAAU;kCACX,cAAA,gOAAC;4BAAI,WAAU;;8CACX,gOAAC;oCACG,SAAS,IAAM,aAAa;oCAC5B,WAAW,CAAC,2DAA2D,EAAE,cAAc,IAAI,8DAA8D,+BAA+B;8CAC3L;;;;;;8CAGD,gOAAC;oCACG,SAAS,IAAM,aAAa;oCAC5B,WAAW,CAAC,2DAA2D,EAAE,cAAc,IAAI,8DAA8D,+BAA+B;8CAC3L;;;;;;;;;;;;;;;;;kCAMT,gOAAC;wBAAI,WAAU;;0CACX,gOAAC;gCAAI,WAAU;;;;;;0CAEf,gOAAC;gCAAI,WAAU;0CAGX,cAAA,gOAAC;oCAAI,WAAU;8CACV,aAAa,GAAG,CAAC,CAAC,sBACf,gOAAC,0KAAK;4CAAgB,IAAI,MAAM,EAAE;2CAAtB,MAAM,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;YAS3C,4BACG,gOAAC;gBAAI,WAAU;;kCAEX,gOAAC;wBAAI,WAAU;;0CAEX,gOAAC;gCAAI,WAAU;;;;;;0CACf,gOAAC;gCAAI,KAAI;gCAAqB,KAAI;gCAAwB,WAAU;;;;;;;;;;;;kCAGxE,gOAAC;wBAAI,WAAU;;0CACX,gOAAC;gCAAI,WAAU;;kDACX,gOAAC,4PAAQ;wCAAC,MAAM;wCAAI,WAAU;;;;;;kDAC9B,gOAAC;wCAAG,WAAU;kDAAmD;;;;;;;;;;;;0CAErE,gOAAC;gCAAE,WAAU;0CAAwE;;;;;;;;;;;;;;;;;;;;;;;;AAQ7G;GAlJwB;;QACL,yKAAW;QACP,yKAAW;QACV,yKAAW;QACb,yKAAW;QAEH,yKAAW;QACf,yKAAW;QACb,yKAAW;QACV,yKAAW;;;KATZ"}}]
}