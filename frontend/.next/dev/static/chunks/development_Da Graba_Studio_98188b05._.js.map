{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/odgmusic/development/Da%20Graba_Studio/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from 'clsx';\nimport { twMerge } from 'tailwind-merge';\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,4MAAO,EAAC,IAAA,mLAAI,EAAC;AACtB"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/odgmusic/development/Da%20Graba_Studio/components/ui/Slider.tsx"],"sourcesContent":["import { forwardRef } from 'react';\nimport { cn } from '@/lib/utils';\n\nexport interface SliderProps extends React.InputHTMLAttributes<HTMLInputElement> {\n    orientation?: 'horizontal' | 'vertical';\n}\n\nconst Slider = forwardRef<HTMLInputElement, SliderProps>(\n    ({ className, orientation = 'horizontal', ...props }, ref) => {\n        return (\n            <input\n                type=\"range\"\n                ref={ref}\n                className={cn(\n                    'appearance-none bg-transparent cursor-pointer',\n                    // Custom track sizing and colors\n                    '[&::-webkit-slider-runnable-track]:bg-carbon [&::-webkit-slider-runnable-track]:border [&::-webkit-slider-runnable-track]:border-silver-dark/30',\n                    '[&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:bg-silver-light',\n                    '[&::-webkit-slider-thumb]:shadow-[0_0_10px_rgba(255,107,0,0.3)] hover:[&::-webkit-slider-thumb]:shadow-[0_0_15px_rgba(255,107,0,0.6)]',\n                    {\n                        'w-full h-2 [&::-webkit-slider-runnable-track]:rounded-full [&::-webkit-slider-runnable-track]:h-2 [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:-mt-1': orientation === 'horizontal',\n                        // Vertical slider hacks\n                        '[writing-mode:vertical-lr] [direction:rtl] h-full w-2 [&::-webkit-slider-runnable-track]:w-2 [&::-webkit-slider-thumb]:h-8 [&::-webkit-slider-thumb]:w-6 [&::-webkit-slider-thumb]:rounded-sm [&::-webkit-slider-thumb]:border [&::-webkit-slider-thumb]:border-carbon': orientation === 'vertical',\n                    },\n                    className\n                )}\n                {...props}\n            />\n        );\n    }\n);\nSlider.displayName = 'Slider';\n\nexport { Slider };\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAMA,MAAM,uBAAS,IAAA,8MAAU,OACrB,CAAC,EAAE,SAAS,EAAE,cAAc,YAAY,EAAE,GAAG,OAAO,EAAE;IAClD,qBACI,gOAAC;QACG,MAAK;QACL,KAAK;QACL,WAAW,IAAA,wJAAE,EACT,iDACA,iCAAiC;QACjC,mJACA,uFACA,yIACA;YACI,wOAAwO,gBAAgB;YACxP,wBAAwB;YACxB,0QAA0Q,gBAAgB;QAC9R,GACA;QAEH,GAAG,KAAK;;;;;;AAGrB;;AAEJ,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 62, "column": 0}, "map": {"version":3,"sources":["file:///Users/odgmusic/development/Da%20Graba_Studio/components/daw/VUMeter.tsx"],"sourcesContent":["import { cn } from '@/lib/utils';\n\ninterface VUMeterProps {\n    level: number; // 0 to 127\n    className?: string;\n}\n\nexport function VUMeter({ level, className }: VUMeterProps) {\n    // Simple segmentation\n    const totalSegments = 30;\n    const activeSegments = Math.round((level / 127) * totalSegments);\n\n    return (\n        <div className={cn(\"flex flex-col justify-end bg-black/40 rounded-sm overflow-hidden p-[1px] gap-[1px] border border-white/5 shadow-inner relative\", className)}>\n            <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent pointer-events-none\" />\n            {Array.from({ length: totalSegments }).map((_, i) => {\n                const segmentIndex = totalSegments - 1 - i;\n                const isActive = segmentIndex < activeSegments;\n                let colorClass = '';\n\n                if (isActive) {\n                    if (segmentIndex > totalSegments - 4) {\n                        colorClass = 'bg-red-500 shadow-[0_0_8px_rgba(239,68,68,0.6)]';\n                    } else if (segmentIndex > totalSegments - 10) {\n                        colorClass = 'bg-yellow-400 shadow-[0_0_8px_rgba(250,204,21,0.6)]';\n                    } else {\n                        colorClass = 'bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.6)]';\n                    }\n                } else {\n                    colorClass = 'bg-white/5';\n                }\n\n                return (\n                    <div\n                        key={i}\n                        className={cn(\"w-full h-[3px] transition-all duration-75 rounded-[0.5px]\", colorClass)}\n                    />\n                );\n            })}\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAAA;;;AAOO,SAAS,QAAQ,EAAE,KAAK,EAAE,SAAS,EAAgB;IACtD,sBAAsB;IACtB,MAAM,gBAAgB;IACtB,MAAM,iBAAiB,KAAK,KAAK,CAAC,AAAC,QAAQ,MAAO;IAElD,qBACI,gOAAC;QAAI,WAAW,IAAA,wJAAE,EAAC,kIAAkI;;0BACjJ,gOAAC;gBAAI,WAAU;;;;;;YACd,MAAM,IAAI,CAAC;gBAAE,QAAQ;YAAc,GAAG,GAAG,CAAC,CAAC,GAAG;gBAC3C,MAAM,eAAe,gBAAgB,IAAI;gBACzC,MAAM,WAAW,eAAe;gBAChC,IAAI,aAAa;gBAEjB,IAAI,UAAU;oBACV,IAAI,eAAe,gBAAgB,GAAG;wBAClC,aAAa;oBACjB,OAAO,IAAI,eAAe,gBAAgB,IAAI;wBAC1C,aAAa;oBACjB,OAAO;wBACH,aAAa;oBACjB;gBACJ,OAAO;oBACH,aAAa;gBACjB;gBAEA,qBACI,gOAAC;oBAEG,WAAW,IAAA,wJAAE,EAAC,6DAA6D;mBADtE;;;;;YAIjB;;;;;;;AAGZ;KAlCgB"}},
    {"offset": {"line": 126, "column": 0}, "map": {"version":3,"sources":["file:///Users/odgmusic/development/Da%20Graba_Studio/components/daw/SpectrumAnalyzer.tsx"],"sourcesContent":["'use client';\n\nimport React, { useEffect, useRef } from 'react';\nimport { cn } from '@/lib/utils';\nimport { useDAWStore } from '@/store/useDAWStore';\n\ninterface SpectrumAnalyzerProps {\n    analyzer?: AnalyserNode; // Optional: If provided, uses real audio data\n    naked?: boolean; // If true, removes background and border\n}\n\nexport function SpectrumAnalyzer({ analyzer, naked }: SpectrumAnalyzerProps) {\n    const isPlaying = useDAWStore((state) => state.isPlaying);\n    const canvasRef = useRef<HTMLCanvasElement>(null);\n    const requestRef = useRef<number>(0);\n\n    // Smooth falloff state holding the max peaks\n    const peaksRef = useRef<number[]>([]);\n\n    useEffect(() => {\n        const canvas = canvasRef.current;\n        if (!canvas) return;\n\n        const ctx = canvas.getContext('2d');\n        if (!ctx) return;\n\n        // Ensure canvas renders sharply on high-DPI displays\n        const scale = window.devicePixelRatio || 1;\n        canvas.width = canvas.clientWidth * scale;\n        canvas.height = canvas.clientHeight * scale;\n        ctx.scale(scale, scale);\n\n        const width = canvas.clientWidth;\n        const height = canvas.clientHeight;\n\n        let dataArray: Uint8Array;\n        let bufferLength = 128; // Default if no analyzer\n\n        if (analyzer) {\n            bufferLength = analyzer.frequencyBinCount;\n            dataArray = new Uint8Array(bufferLength);\n        } else {\n            dataArray = new Uint8Array(bufferLength);\n        }\n\n        // Initialize peaks array\n        if (peaksRef.current.length !== bufferLength) {\n            peaksRef.current = new Array(bufferLength).fill(0);\n        }\n\n        const renderFrame = () => {\n            requestRef.current = requestAnimationFrame(renderFrame);\n\n            if (!isPlaying) {\n                // Dim the display when not playing\n                ctx.clearRect(0, 0, canvas.width, canvas.height);\n                // Slowly decay any existing peaks\n                peaksRef.current = peaksRef.current.map(p => p * 0.9);\n\n                // Draw static low baseline\n                const barWidth = Math.ceil(canvas.width / bufferLength);\n                for (let i = 0; i < bufferLength; i++) {\n                    const x = i * barWidth;\n                    ctx.fillStyle = `rgba(255, 107, 0, 0.05)`;\n                    ctx.fillRect(x, canvas.height - 2, barWidth - 1, 2);\n                }\n                return;\n            }\n\n            // Get audio data\n            if (analyzer) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                analyzer.getByteFrequencyData(dataArray as any);\n            } else {\n                // Simulate data for visual placeholder\n                const time = Date.now() / 1000;\n                for (let i = 0; i < bufferLength; i++) {\n                    // Create some dynamic peaks that look like music\n                    const noise = Math.random() * 20;\n                    const wave1 = Math.sin(time * 2 + i * 0.1) * 50 + 50;\n                    const wave2 = Math.cos(time * 5 - i * 0.3) * 60 + 60;\n\n                    // Emphasize bass (lower indices)\n                    const bassBoost = i < 20 ? (20 - i) * 3 : 0;\n\n                    // Attenuate highs\n                    const highCut = i > 80 ? (i - 80) * 2 : 0;\n\n                    let val = (wave1 + wave2) / 2 + noise + bassBoost - highCut;\n\n                    // Occasional random spikes (like kick/snare)\n                    if (Math.random() > 0.95 && i < 40) val += 80;\n\n                    dataArray[i] = Math.max(0, Math.min(255, val));\n                }\n            }\n\n            // Clear canvas\n            ctx.clearRect(0, 0, width, height);\n\n            // Calculate bar width (leaving some gap)\n            // We use a subset of the buffer for better aesthetics (skipping the very highest dead frequencies)\n            const displayBins = Math.floor(bufferLength * 0.7);\n            const barWidth = (width / displayBins) - 1; // 1px gap\n            let x = 0;\n\n            const peaks = peaksRef.current;\n            const gravity = 1.5; // Speed at which peaks fall\n\n            for (let i = 0; i < displayBins; i++) {\n                const value = dataArray[i];\n\n                // Update peak for smooth falloff\n                if (value > peaks[i]) {\n                    peaks[i] = value;\n                } else {\n                    peaks[i] = Math.max(0, peaks[i] - gravity);\n                }\n\n                // Normalize values to canvas height\n                const barHeight = (value / 255) * height;\n                const peakHeight = (peaks[i] / 255) * height;\n\n                // --- Draw Main Bar ---\n                // Gradient from Metallic Gray to DA GRABA Naranja (#FF6B00)\n                const barGradient = ctx.createLinearGradient(0, height, 0, height - barHeight);\n                barGradient.addColorStop(0, '#5A5A60');      // Metallic gray base\n                barGradient.addColorStop(0.5, '#8C8C91');    // Lighter gray middle\n                barGradient.addColorStop(1, '#FF6B00');      // Orange peak\n\n                ctx.fillStyle = barGradient;\n                ctx.fillRect(x, height - barHeight, barWidth, barHeight);\n\n                // --- Draw Floating Peak (Cap) ---\n                // To enhance the 2D/3D feel, draw a bright cap at the peak level\n                ctx.fillStyle = '#FF9A4A'; // Slightly brighter orange for the cap\n                ctx.fillRect(x, height - peakHeight - 2, barWidth, 2);\n\n                x += barWidth + 1;\n            }\n        };\n\n        renderFrame();\n\n        return () => {\n            if (requestRef.current) {\n                cancelAnimationFrame(requestRef.current);\n            }\n        };\n    }, [analyzer]);\n\n    return (\n        <div className={cn(\n            \"w-full h-full relative p-2 overflow-hidden\",\n            !naked && \"bg-[#111113]/60 backdrop-blur-md rounded-lg border border-[#333] shadow-[inset_0_0_20px_rgba(0,0,0,0.8)]\"\n        )}>\n            {/* Glassmorphism reflection highlight */}\n            <div className=\"absolute top-0 left-0 right-0 h-1/3 bg-gradient-to-b from-white/5 to-transparent pointer-events-none rounded-t-lg\" />\n\n            <canvas\n                ref={canvasRef}\n                className=\"w-full h-full block\"\n            />\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 303, "column": 0}, "map": {"version":3,"sources":["file:///Users/odgmusic/development/Da%20Graba_Studio/components/daw/Fader.tsx"],"sourcesContent":["'use client';\n\nimport { useDAWStore } from '@/store/useDAWStore';\nimport { Slider } from '@/components/ui/Slider';\nimport { VUMeter } from '@/components/daw/VUMeter';\nimport { SpectrumAnalyzer } from '@/components/daw/SpectrumAnalyzer';\nimport { cn } from '@/lib/utils';\n\ninterface FaderProps {\n    id: string;\n}\n\nexport function Fader({ id }: FaderProps) {\n    const fader = useDAWStore((state) => state.faders.find((f) => f.id === id));\n    const setFaderValue = useDAWStore((state) => state.setFaderValue);\n    const toggleSolo = useDAWStore((state) => state.toggleSolo);\n    const toggleMute = useDAWStore((state) => state.toggleMute);\n    const isFullMixer = useDAWStore((state) => state.isFullMixer);\n\n    if (!fader) return null;\n\n    return (\n        <div className={cn(\"flex flex-col items-center group transition-all duration-500\", isFullMixer ? \"w-24\" : \"w-16\")}>\n\n            {/* Top Digital Section: Spectrum Analyzer */}\n            <div className=\"w-full h-16 mb-2 bg-black border border-white/5 rounded-sm overflow-hidden shadow-inner relative group-hover:border-white/10 transition-colors\">\n                <SpectrumAnalyzer naked />\n                <div className=\"absolute inset-x-0 bottom-0 h-[1px] bg-cyan-400/20 shadow-[0_0_10px_rgba(34,211,238,0.5)]\" />\n            </div>\n\n            {/* FX Slots (Mini Buttons) */}\n            <div className=\"grid grid-cols-2 gap-1 w-full mb-3 px-1\">\n                {['EQ', 'COMP', 'DLY', 'FX'].map((fx) => (\n                    <button\n                        key={fx}\n                        className=\"h-5 rounded-[1px] bg-[#111] border border-white/5 text-[7px] font-black text-white/20 hover:text-white/60 hover:bg-[#222] transition-all tracking-tighter uppercase ring-1 ring-black\"\n                    >\n                        {fx}\n                    </button>\n                ))}\n            </div>\n\n            {/* Top Section: Buttons & Small Screen */}\n            <div className=\"flex flex-col gap-2 items-center mb-6 w-full px-1\">\n\n                {/* Mini Routing/Pan Screen (OLED style) */}\n                <div className=\"w-full h-10 bg-black border border-white/10 rounded-sm flex flex-col items-center justify-center shadow-[inset_0_2px_10px_rgba(0,0,0,1)] mb-2 overflow-hidden relative group\">\n                    <div className=\"absolute inset-0 bg-cyan-500/5 animate-pulse\" />\n                    <span className=\"text-[10px] font-mono text-cyan-400 tracking-widest drop-shadow-[0_0_5px_rgba(34,211,238,0.5)]\">\n                        {fader.pan === 0 ? 'C' : fader.pan > 0 ? `R${fader.pan}` : `L${Math.abs(fader.pan)}`}\n                    </span>\n                    <div className=\"w-4/5 h-[1px] bg-white/5 mt-1\" />\n                    <span className=\"text-[7px] font-mono text-white/20 mt-0.5 tracking-tighter uppercase\">Stereo Out</span>\n                </div>\n\n                <div className=\"grid grid-cols-2 gap-1 w-full\">\n                    <button\n                        onClick={() => toggleSolo(id)}\n                        className={`h-7 rounded-sm text-[9px] font-black tracking-widest border transition-all duration-300 shadow-md ${fader.isSoloed ? 'bg-orange-500 border-orange-400 text-black shadow-[0_0_15px_rgba(249,115,22,0.5)] ring-1 ring-orange-300/50' : 'bg-neutral-900 border-white/5 text-white/30 hover:text-white/60 hover:bg-neutral-800'}`}\n                    >\n                        S\n                    </button>\n                    <button\n                        onClick={() => toggleMute(id)}\n                        className={`h-7 rounded-sm text-[9px] font-black tracking-widest border transition-all duration-300 shadow-md ${fader.isMuted ? 'bg-red-600 border-red-500 text-black shadow-[0_0_15px_rgba(220,38,38,0.5)] ring-1 ring-red-400/50' : 'bg-neutral-900 border-white/5 text-white/30 hover:text-white/60 hover:bg-neutral-800'}`}\n                    >\n                        M\n                    </button>\n                </div>\n            </div>\n\n            {/* Main Fader Track Area */}\n            <div className=\"relative h-[300px] w-full bg-[#111] border-x border-[#222] flex shadow-inner group-hover:bg-[#141414] transition-colors rounded-t-sm\">\n\n                {/* Scale Markings Container */}\n                <div className=\"absolute left-1 inset-y-0 w-2 flex flex-col justify-between py-4 pointer-events-none z-0\">\n                    {[10, 5, 0, -5, -10, -20, -30, -60].map((val, i) => (\n                        <div key={i} className=\"w-full border-t border-silver-dark/40 relative\">\n                            {(val === 0 || val === 10 || val === -60) && (\n                                <span className={`absolute left-3 -top-2 text-[7px] font-mono ${(val === 0) ? 'text-primary' : 'text-silver-dark'}`}>\n                                    {val === -60 ? '-∞' : val}\n                                </span>\n                            )}\n                        </div>\n                    ))}\n                </div>\n\n                {/* LED VU Meter integrated into fader track */}\n                <div className=\"absolute right-1 top-4 bottom-4 w-1.5 opacity-80 pointer-events-none z-0\">\n                    <VUMeter level={fader.isMuted ? 0 : Math.floor(fader.value * 1.27)} className=\"h-full w-full rounded-sm\" />\n                </div>\n\n                {/* Functional Slider Track */}\n                <div className=\"absolute inset-0 flex justify-center z-10 w-full\">\n                    {/* The physical slit */}\n                    <div className=\"absolute top-4 bottom-4 w-1.5 bg-black rounded-full shadow-[inset_0_2px_5px_rgba(0,0,0,0.8)]\" />\n\n                    <Slider\n                        orientation=\"vertical\"\n                        min={0}\n                        max={100}\n                        value={fader.value}\n                        onChange={(e) => setFaderValue(id, parseInt(e.target.value))}\n                        className=\"h-full w-full cursor-grab active:cursor-grabbing transition-all duration-700 ease-in-out opacity-0 z-20\"\n                        style={{ writingMode: 'vertical-lr', direction: 'rtl' } as React.CSSProperties}\n                    />\n\n                    {/* Simulated 3D Fader Cap (Brushed Metal) */}\n                    <div\n                        className=\"absolute w-8 h-14 bg-[#CCCCCC] border-x border-[#999] shadow-[0_10px_30px_rgba(0,0,0,0.8),_inset_0_1px_4px_rgba(255,255,255,0.8)] rounded-[2px] pointer-events-none z-10 transition-all duration-700 ease-in-out flex flex-col items-center justify-center transform-gpu\"\n                        style={{ bottom: `calc(${fader.value}% - 28px)` }}\n                    >\n                        <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/40 to-transparent opacity-50\" />\n                        <div className=\"w-full h-[3px] bg-black/60 shadow-[0_1px_2px_rgba(255,255,255,0.2)]\" />\n                        <div className=\"w-full h-[4px] bg-gradient-to-b from-white/20 to-transparent mt-[1px]\" />\n                        <div className=\"mt-auto mb-1 flex flex-col gap-[2px]\">\n                            <div className=\"w-5 h-[1px] bg-black/20\" />\n                            <div className=\"w-5 h-[1px] bg-black/20\" />\n                        </div>\n                    </div>\n                </div>\n\n            </div>\n\n            {/* Scribble Strip (Aluminium look) */}\n            <div className=\"w-full min-h-[48px] bg-gradient-to-b from-[#DEDEDE] to-[#B0B0B0] mt-1 rounded-b-md flex items-center justify-center shadow-[inset_0_2px_10px_rgba(255,255,255,0.8),_0_5px_15px_rgba(0,0,0,0.3)] border-b border-black/40 border-x border-black/20 px-1 overflow-hidden\">\n                <span className=\"font-mono text-[10px] font-black text-black/80 tracking-widest uppercase text-center break-words leading-tight\">{fader.label}</span>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 646, "column": 0}, "map": {"version":3,"sources":["file:///Users/odgmusic/development/Da%20Graba_Studio/lib/audio-engine-bridge.ts"],"sourcesContent":["/**\n * @file audio-engine-bridge.ts\n * @description\n * This file serves as the Javascript/TypeScript bridge to a future C++ (JUCE) audio engine\n * compiled to WebAssembly (Wasm). \n * \n * The goal is to offload heavy DSP (Digital Signal Processing), precise timing,\n * and audio routing to the C++ core, while keeping the UI in React/Next.js.\n * This ensures \"zero-latency\" control (or as close to it as possible in the browser)\n * for the human interface.\n */\n\n// Define the interface for our future Wasm Audio Engine Module\nexport interface WasmAudioEngine {\n    // Initialization\n    init: (sampleRate: number, bufferSize: number) => boolean;\n\n    // Playback Control\n    play: () => void;\n    pause: () => void;\n    stop: () => void;\n    setPlayheadPosition: (seconds: number) => void;\n    getPlayheadPosition: () => number;\n\n    // Track Mixing Controls (Zero-latency parameter updates)\n    setTrackVolume: (trackId: string, gainLinear: number) => void;\n    setTrackPan: (trackId: string, panValue: number) => void; /* -1.0 to 1.0 */\n    setTrackMute: (trackId: string, isMuted: boolean) => void;\n    setTrackSolo: (trackId: string, isSolo: boolean) => void;\n\n    // Timeline Editing\n    addAudioClip: (trackId: string, clipId: string, audioDataPtr: number, dataSize: number, startTime: number) => boolean;\n    moveAudioClip: (clipId: string, newStartTime: number) => void;\n    trimAudioClip: (clipId: string, trimStart: number, trimEnd: number) => void;\n    setClipFade: (clipId: string, fadeType: 'in' | 'out', duration: number) => void;\n\n    // Analysis\n    getWaveformData: (clipId: string, resolution: number) => Float32Array;\n    getVUMeterLevel: (trackId: string) => number;\n}\n\n/**\n * Mock implementation of the WasmAudioEngine for development\n * before the actual C++/JUCE module is compiled and ready.\n */\nclass MockAudioEngine implements WasmAudioEngine {\n    private isPlaying = false;\n    private playhead = 0;\n\n    init(sampleRate: number, bufferSize: number) {\n        console.log(`[WasmBridge] Engine initialized at ${sampleRate}Hz, buffer: ${bufferSize}`);\n        return true;\n    }\n\n    play() {\n        this.isPlaying = true;\n        console.log(`[WasmBridge] Playback started.`);\n    }\n\n    pause() {\n        this.isPlaying = false;\n        console.log(`[WasmBridge] Playback paused.`);\n    }\n\n    stop() {\n        this.isPlaying = false;\n        this.playhead = 0;\n        console.log(`[WasmBridge] Playback stopped.`);\n    }\n\n    setPlayheadPosition(seconds: number) {\n        this.playhead = seconds;\n    }\n\n    getPlayheadPosition() {\n        // Mock incrementing playhead if playing\n        if (this.isPlaying) this.playhead += 0.05;\n        return this.playhead;\n    }\n\n    setTrackVolume(trackId: string, gainLinear: number) {\n        console.log(`[WasmBridge] Track ${trackId} volume set to ${gainLinear}`);\n    }\n\n    setTrackPan(trackId: string, panValue: number) {\n        console.log(`[WasmBridge] Track ${trackId} pan set to ${panValue}`);\n    }\n\n    setTrackMute(trackId: string, isMuted: boolean) {\n        console.log(`[WasmBridge] Track ${trackId} mute: ${isMuted}`);\n    }\n\n    setTrackSolo(trackId: string, isSolo: boolean) {\n        console.log(`[WasmBridge] Track ${trackId} solo: ${isSolo}`);\n    }\n\n    addAudioClip(trackId: string, clipId: string, audioDataPtr: number, dataSize: number, startTime: number) {\n        console.log(`[WasmBridge] Clip ${clipId} added to Track ${trackId} at ${startTime}s`);\n        return true;\n    }\n\n    moveAudioClip(clipId: string, newStartTime: number) {\n        console.log(`[WasmBridge] Clip ${clipId} moved to ${newStartTime}s`);\n    }\n\n    trimAudioClip(clipId: string, trimStart: number, trimEnd: number) {\n        console.log(`[WasmBridge] Clip ${clipId} trimmed: start=${trimStart}, end=${trimEnd}`);\n    }\n\n    setClipFade(clipId: string, fadeType: 'in' | 'out', duration: number) {\n        console.log(`[WasmBridge] Clip ${clipId} fade ${fadeType} set to ${duration}s`);\n    }\n\n    getWaveformData(clipId: string, resolution: number) {\n        // Return dummy waveform data for the UI to render\n        const dummyData = new Float32Array(resolution);\n        for (let i = 0; i < resolution; i++) {\n            dummyData[i] = Math.sin(i * 0.1) * 0.5 + 0.5; // Dummy sine wave 0-1\n        }\n        return dummyData;\n    }\n\n    getVUMeterLevel(trackId: string) {\n        return this.isPlaying ? Math.random() : 0.0;\n    }\n}\n\n// Export a singleton instance of the engine\nexport const audioEngine = new MockAudioEngine();\n"],"names":[],"mappings":"AAAA;;;;;;;;;;CAUC,GAED,+DAA+D;;;;;AA6B/D;;;CAGC,GACD,MAAM;IACM,YAAY,MAAM;IAClB,WAAW,EAAE;IAErB,KAAK,UAAkB,EAAE,UAAkB,EAAE;QACzC,QAAQ,GAAG,CAAC,CAAC,mCAAmC,EAAE,WAAW,YAAY,EAAE,YAAY;QACvF,OAAO;IACX;IAEA,OAAO;QACH,IAAI,CAAC,SAAS,GAAG;QACjB,QAAQ,GAAG,CAAC,CAAC,8BAA8B,CAAC;IAChD;IAEA,QAAQ;QACJ,IAAI,CAAC,SAAS,GAAG;QACjB,QAAQ,GAAG,CAAC,CAAC,6BAA6B,CAAC;IAC/C;IAEA,OAAO;QACH,IAAI,CAAC,SAAS,GAAG;QACjB,IAAI,CAAC,QAAQ,GAAG;QAChB,QAAQ,GAAG,CAAC,CAAC,8BAA8B,CAAC;IAChD;IAEA,oBAAoB,OAAe,EAAE;QACjC,IAAI,CAAC,QAAQ,GAAG;IACpB;IAEA,sBAAsB;QAClB,wCAAwC;QACxC,IAAI,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,QAAQ,IAAI;QACrC,OAAO,IAAI,CAAC,QAAQ;IACxB;IAEA,eAAe,OAAe,EAAE,UAAkB,EAAE;QAChD,QAAQ,GAAG,CAAC,CAAC,mBAAmB,EAAE,QAAQ,eAAe,EAAE,YAAY;IAC3E;IAEA,YAAY,OAAe,EAAE,QAAgB,EAAE;QAC3C,QAAQ,GAAG,CAAC,CAAC,mBAAmB,EAAE,QAAQ,YAAY,EAAE,UAAU;IACtE;IAEA,aAAa,OAAe,EAAE,OAAgB,EAAE;QAC5C,QAAQ,GAAG,CAAC,CAAC,mBAAmB,EAAE,QAAQ,OAAO,EAAE,SAAS;IAChE;IAEA,aAAa,OAAe,EAAE,MAAe,EAAE;QAC3C,QAAQ,GAAG,CAAC,CAAC,mBAAmB,EAAE,QAAQ,OAAO,EAAE,QAAQ;IAC/D;IAEA,aAAa,OAAe,EAAE,MAAc,EAAE,YAAoB,EAAE,QAAgB,EAAE,SAAiB,EAAE;QACrG,QAAQ,GAAG,CAAC,CAAC,kBAAkB,EAAE,OAAO,gBAAgB,EAAE,QAAQ,IAAI,EAAE,UAAU,CAAC,CAAC;QACpF,OAAO;IACX;IAEA,cAAc,MAAc,EAAE,YAAoB,EAAE;QAChD,QAAQ,GAAG,CAAC,CAAC,kBAAkB,EAAE,OAAO,UAAU,EAAE,aAAa,CAAC,CAAC;IACvE;IAEA,cAAc,MAAc,EAAE,SAAiB,EAAE,OAAe,EAAE;QAC9D,QAAQ,GAAG,CAAC,CAAC,kBAAkB,EAAE,OAAO,gBAAgB,EAAE,UAAU,MAAM,EAAE,SAAS;IACzF;IAEA,YAAY,MAAc,EAAE,QAAsB,EAAE,QAAgB,EAAE;QAClE,QAAQ,GAAG,CAAC,CAAC,kBAAkB,EAAE,OAAO,MAAM,EAAE,SAAS,QAAQ,EAAE,SAAS,CAAC,CAAC;IAClF;IAEA,gBAAgB,MAAc,EAAE,UAAkB,EAAE;QAChD,kDAAkD;QAClD,MAAM,YAAY,IAAI,aAAa;QACnC,IAAK,IAAI,IAAI,GAAG,IAAI,YAAY,IAAK;YACjC,SAAS,CAAC,EAAE,GAAG,KAAK,GAAG,CAAC,IAAI,OAAO,MAAM,KAAK,sBAAsB;QACxE;QACA,OAAO;IACX;IAEA,gBAAgB,OAAe,EAAE;QAC7B,OAAO,IAAI,CAAC,SAAS,GAAG,KAAK,MAAM,KAAK;IAC5C;AACJ;AAGO,MAAM,cAAc,IAAI"}},
    {"offset": {"line": 737, "column": 0}, "map": {"version":3,"sources":["file:///Users/odgmusic/development/Da%20Graba_Studio/components/daw/AudioTimeline.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { Play, Pause, Scissors, MousePointer2 } from 'lucide-react';\nimport { audioEngine } from '@/lib/audio-engine-bridge';\nimport { useDAWStore } from '@/store/useDAWStore';\n\ninterface AudioClip {\n    id: string;\n    trackId: string;\n    startTime: number; // in seconds\n    duration: number; // in seconds\n    color: string;\n    name: string;\n}\n\nexport function AudioTimeline() {\n    const tracks = useDAWStore((state) => state.tracks);\n\n    if (tracks.length === 0) {\n        return (\n            <div className=\"flex-1 flex flex-col items-center justify-center h-full text-center p-8\">\n                <div className=\"w-12 h-12 rounded-full border border-white/10 flex items-center justify-center mb-4 bg-white/5 animate-pulse\">\n                    <div className=\"w-4 h-4 rounded-full bg-cyan-glow shadow-[0_0_10px_#00F0FF]\" />\n                </div>\n                <h3 className=\"text-white font-bold tracking-widest text-sm mb-2 uppercase\">Espacio de Trabajo Limpio</h3>\n                <p className=\"text-silver-dark text-xs max-w-xs leading-relaxed\">\n                    Dile a John en el chat qué quieres crear y él abrirá los tracks mágicamente...\n                </p>\n            </div>\n        );\n    }\n\n    const [isPlaying, setIsPlaying] = useState(false);\n    const [playhead, setPlayhead] = useState(0); // seconds\n    const canvasRef = useRef<HTMLCanvasElement>(null);\n    const containerRef = useRef<HTMLDivElement>(null);\n    const animationRef = useRef<number | null>(null);\n\n    // Timeline scale (pixels per second)\n    const pixelsPerSecond = 50;\n    const timelineDuration = 180; // 3 minutes total for now\n    const timelineWidth = timelineDuration * pixelsPerSecond;\n\n    // Mock clips for visualization\n    const [clips, setClips] = useState<AudioClip[]>([\n        { id: 'c1', trackId: 't1', startTime: 5, duration: 15, color: '#00F0FF', name: 'vocal_take_1.wav' },\n        { id: 'c2', trackId: 't2', startTime: 0, duration: 60, color: '#FF6B00', name: 'beat_render.wav' },\n    ]);\n\n    const [draggingClip, setDraggingClip] = useState<string | null>(null);\n    const [dragOffset, setDragOffset] = useState(0);\n\n    // --- Playhead Animation Loop ---\n    const loop = () => {\n        if (isPlaying) {\n            setPlayhead(audioEngine.getPlayheadPosition());\n        }\n        animationRef.current = requestAnimationFrame(loop);\n    };\n\n    useEffect(() => {\n        animationRef.current = requestAnimationFrame(loop);\n        return () => {\n            if (animationRef.current) cancelAnimationFrame(animationRef.current);\n        };\n    }, [isPlaying]);\n\n    const togglePlay = () => {\n        if (isPlaying) {\n            audioEngine.pause();\n            setIsPlaying(false);\n        } else {\n            audioEngine.play();\n            setIsPlaying(true);\n        }\n    };\n\n    // --- Drag and Drop Logic ---\n    const handleMouseDown = (e: React.MouseEvent, clip: AudioClip) => {\n        e.stopPropagation();\n        setDraggingClip(clip.id);\n\n        // Calculate where inside the clip we clicked (in pixels)\n        const rect = (e.target as HTMLElement).getBoundingClientRect();\n        const offsetX = e.clientX - rect.left;\n        setDragOffset(offsetX);\n    };\n\n    const handleMouseMove = (e: React.MouseEvent) => {\n        if (!draggingClip || !containerRef.current) return;\n\n        const containerRect = containerRef.current.getBoundingClientRect();\n\n        // Calculate new X position relative to container, accounting for scroll\n        const newX = e.clientX - containerRect.left + containerRef.current.scrollLeft - dragOffset;\n\n        // Convert X pixels back to seconds\n        const newStartTime = Math.max(0, newX / pixelsPerSecond);\n\n        setClips(prev => prev.map(c =>\n            c.id === draggingClip ? { ...c, startTime: newStartTime } : c\n        ));\n    };\n\n    const handleMouseUp = () => {\n        if (draggingClip) {\n            // Inform the engine of the final move\n            const clip = clips.find(c => c.id === draggingClip);\n            if (clip) {\n                audioEngine.moveAudioClip(clip.id, clip.startTime);\n            }\n            setDraggingClip(null);\n        }\n    };\n\n    // --- Timeline Click (Move Playhead) ---\n    const handleTimelineClick = (e: React.MouseEvent) => {\n        if (!containerRef.current || draggingClip) return;\n        const containerRect = containerRef.current.getBoundingClientRect();\n        const clickX = e.clientX - containerRect.left + containerRef.current.scrollLeft;\n        const newTime = clickX / pixelsPerSecond;\n\n        audioEngine.setPlayheadPosition(newTime);\n        setPlayhead(newTime);\n    };\n\n    // --- Waveform Rendering ---\n    useEffect(() => {\n        const canvas = canvasRef.current;\n        if (!canvas) return;\n        const ctx = canvas.getContext('2d');\n        if (!ctx) return;\n\n        // Clear canvas\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n        clips.forEach(clip => {\n            const x = clip.startTime * pixelsPerSecond;\n            const width = clip.duration * pixelsPerSecond;\n\n            // Get mock waveform from engine\n            const waveform = audioEngine.getWaveformData(clip.id, Math.floor(width));\n\n            ctx.beginPath();\n            ctx.strokeStyle = clip.color;\n            ctx.lineWidth = 1.5;\n            ctx.moveTo(x, 25); // Center line (assuming 50px height track)\n\n            for (let i = 0; i < width; i++) {\n                // Waveform values are 0-1, map to -20 to 20 pixels amplitude\n                const amplitude = (waveform[i] - 0.5) * 40;\n                ctx.lineTo(x + i, 25 + amplitude);\n            }\n            ctx.stroke();\n        });\n\n    }, [clips, pixelsPerSecond]);\n\n\n    return (\n        <div className=\"flex flex-col w-full h-full bg-[#18181A] border border-[#222] shadow-[inset_0_5px_20px_rgba(0,0,0,0.8)] rounded-xl overflow-hidden font-mono select-none\">\n\n            {/* Toolbar */}\n            <div className=\"h-10 border-b border-[#222] bg-[#111113] flex items-center px-4 gap-4 shadow-sm z-20 relative\">\n                <button onClick={togglePlay} className={`w-8 h-8 rounded flex items-center justify-center transition-colors ${isPlaying ? 'bg-cyan-glow/20 text-cyan-glow border border-cyan-glow' : 'hover:bg-[#222] text-[#AAA]'}`}>\n                    {isPlaying ? <Pause size={14} fill=\"currentColor\" /> : <Play size={14} fill=\"currentColor\" className=\"ml-0.5\" />}\n                </button>\n\n                <div className=\"w-px h-4 bg-[#333]\" />\n\n                <div className=\"flex gap-1\">\n                    <button className=\"w-8 h-8 rounded flex items-center justify-center hover:bg-[#222] text-[#AAA] active:text-cyan-glow\">\n                        <MousePointer2 size={14} />\n                    </button>\n                    <button className=\"w-8 h-8 rounded flex items-center justify-center hover:bg-[#222] text-[#AAA] active:text-red-500\">\n                        <Scissors size={14} />\n                    </button>\n                </div>\n\n                <div className=\"ml-auto text-cyan-glow text-xs font-bold tracking-widest bg-black px-3 py-1 rounded shadow-inner border border-[#222]\">\n                    {Math.floor(playhead / 60).toString().padStart(2, '0')}:\n                    {Math.floor(playhead % 60).toString().padStart(2, '0')}.\n                    {Math.floor((playhead % 1) * 100).toString().padStart(2, '0')}\n                </div>\n            </div>\n\n            {/* Timeline Scrollable Area */}\n            <div\n                ref={containerRef}\n                className=\"flex-1 overflow-auto relative cursor-text\"\n                onMouseMove={handleMouseMove}\n                onMouseUp={handleMouseUp}\n                onMouseLeave={handleMouseUp}\n                onClick={handleTimelineClick}\n            >\n                {/* The sprawling timeline width */}\n                <div style={{ width: `${timelineWidth}px`, height: '100%' }} className=\"relative bg-[#1A1A1C]\">\n\n                    {/* Time Ruler (Seconds) */}\n                    <div className=\"absolute top-0 left-0 w-full h-6 border-b border-[#2A2A2D] bg-[#111] opacity-90 z-10 flex\">\n                        {Array.from({ length: timelineDuration }).map((_, i) => (\n                            <div key={`ruler-${i}`} className=\"h-full border-l border-[#333] relative\" style={{ width: `${pixelsPerSecond}px` }}>\n                                {i % 5 === 0 && <span className=\"absolute top-1 left-1 text-[8px] text-[#666]\">{i}s</span>}\n                            </div>\n                        ))}\n                    </div>\n\n                    {/* Background Grid Lines rendering over tracks */}\n                    <div className=\"absolute top-6 left-0 w-full bottom-0 flex pointer-events-none opacity-20\">\n                        {Array.from({ length: timelineDuration }).map((_, i) => (\n                            <div key={`grid-${i}`} className=\"h-full border-l border-[#444]\" style={{ width: `${pixelsPerSecond}px` }} />\n                        ))}\n                    </div>\n\n                    {/* Tracks Definition Container */}\n                    <div className=\"absolute top-6 left-0 w-full flex flex-col pt-2 gap-1 pb-4\">\n                        {tracks.map((track, trackIndex) => (\n                            <div key={track.id} className=\"h-[60px] w-full bg-[#202022] border-y border-[#18181A] relative shadow-inner\">\n                                {/* Waveform Canvas Layer */}\n                                {trackIndex === 0 && (\n                                    <canvas\n                                        ref={canvasRef}\n                                        width={timelineWidth}\n                                        height={60}\n                                        className=\"absolute inset-0 pointer-events-none opacity-60 mix-blend-screen\"\n                                        style={{ top: 0 }}\n                                    />\n                                )}\n\n                                {/* Clips Interaction Layer */}\n                                {clips.filter(c => c.trackId === track.id).map(clip => (\n                                    <div\n                                        key={clip.id}\n                                        onMouseDown={(e) => handleMouseDown(e, clip)}\n                                        className={`absolute top-1 bottom-1 rounded-sm border-2 cursor-grab active:cursor-grabbing backdrop-blur-sm transition-shadow ${draggingClip === clip.id ? 'z-20 shadow-[0_5px_15px_rgba(0,0,0,0.5)] border-white/80' : 'z-10 shadow-sm'}`}\n                                        style={{\n                                            left: `${clip.startTime * pixelsPerSecond}px`,\n                                            width: `${clip.duration * pixelsPerSecond}px`,\n                                            backgroundColor: `${clip.color}20`,\n                                            borderColor: `${clip.color}80`\n                                        }}\n                                    >\n                                        <div className=\"bg-[#111]/80 px-1 py-0.5 text-[8px] truncate text-[#AAA] rounded-br-sm inline-block max-w-full\">\n                                            {clip.name}\n                                        </div>\n                                        <div className=\"absolute top-0 left-0 w-2 h-2 bg-white/50 clip-path-triangle-tl opacity-0 hover:opacity-100 transition-opacity cursor-ew-resize\" />\n                                        <div className=\"absolute top-0 right-0 w-2 h-2 bg-white/50 clip-path-triangle-tr opacity-0 hover:opacity-100 transition-opacity cursor-ew-resize\" />\n                                    </div>\n                                ))}\n                            </div>\n                        ))}\n                    </div>\n\n                </div>\n\n                {/* Playhead Marker */}\n                <div\n                    className=\"absolute top-0 bottom-0 w-px bg-yellow-400 z-30 pointer-events-none shadow-[0_0_10px_rgba(250,204,21,0.8)]\"\n                    style={{ left: `${playhead * pixelsPerSecond}px` }}\n                >\n                    <div className=\"absolute -top-1 -left-1.5 w-0 h-0 border-l-[6px] border-r-[6px] border-t-[8px] border-l-transparent border-r-transparent border-t-yellow-400\" />\n                </div>\n\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1208, "column": 0}, "map": {"version":3,"sources":["file:///Users/odgmusic/development/Da%20Graba_Studio/components/daw/DawTrackControl.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Volume2, Power, Trash2 } from 'lucide-react';\nimport { audioEngine } from '@/lib/audio-engine-bridge';\nimport { useDAWStore } from '@/store/useDAWStore';\n\ninterface DawTrackControlProps {\n    trackId: string;\n    trackName: string;\n    color: string;\n}\n\nexport function DawTrackControl({ trackId, trackName, color }: DawTrackControlProps) {\n    const fader = useDAWStore((state) => state.faders.find((f) => f.id === trackId));\n    const setFaderValue = useDAWStore((state) => state.setFaderValue);\n    const setPanStore = useDAWStore((state) => state.setPan);\n    const toggleSoloStore = useDAWStore((state) => state.toggleSolo);\n    const toggleMuteStore = useDAWStore((state) => state.toggleMute);\n    const removeTrack = useDAWStore((state) => state.removeTrack);\n\n    if (!fader) return null;\n\n    // Communication with Bridge\n    useEffect(() => { audioEngine.setTrackVolume(trackId, fader.value / 100); }, [fader.value, trackId]);\n    useEffect(() => { audioEngine.setTrackPan(trackId, fader.pan / 100); }, [fader.pan, trackId]);\n    useEffect(() => { audioEngine.setTrackMute(trackId, fader.isMuted); }, [fader.isMuted, trackId]);\n    useEffect(() => { audioEngine.setTrackSolo(trackId, fader.isSoloed); }, [fader.isSoloed, trackId]);\n\n    // Simple Circular Knob Renderer (SVG)\n    const renderKnob = (\n        value: number,\n        min: number,\n        max: number,\n        label: string,\n        onChange: (v: number) => void,\n        isBipolar: boolean = false\n    ) => {\n        // Map value to angle (-135 to 135 deg)\n        const percent = (value - min) / (max - min);\n        const angle = -135 + percent * 270;\n\n        const handleMouseDown = (e: React.MouseEvent) => {\n            e.preventDefault();\n            const startY = e.clientY;\n            const startVal = value;\n\n            const onMouseMove = (moveEvent: MouseEvent) => {\n                const deltaY = (startY - moveEvent.clientY) * 0.5; // Sensitivity adj\n                let newVal = startVal + deltaY;\n                newVal = Math.max(min, Math.min(max, newVal));\n                onChange(Math.round(newVal));\n            };\n\n            const onMouseUp = () => {\n                window.removeEventListener('mousemove', onMouseMove);\n                window.removeEventListener('mouseup', onMouseUp);\n            };\n\n            window.addEventListener('mousemove', onMouseMove);\n            window.addEventListener('mouseup', onMouseUp);\n        };\n\n        return (\n            <div className=\"flex flex-col items-center gap-1 group\">\n                <div\n                    className=\"w-8 h-8 rounded-full bg-[#18181A] shadow-[inset_0_2px_4px_rgba(0,0,0,0.8)] border border-white/5 relative flex items-center justify-center cursor-ns-resize\"\n                    onMouseDown={handleMouseDown}\n                >\n                    <svg className=\"absolute inset-0 w-full h-full -rotate-[135deg]\" viewBox=\"0 0 32 32\">\n                        <circle cx=\"16\" cy=\"16\" r=\"12\" fill=\"none\" stroke=\"#222\" strokeWidth=\"2\" strokeDasharray=\"56.5\" />\n                        <circle cx=\"16\" cy=\"16\" r=\"12\" fill=\"none\" stroke={color} strokeWidth=\"2\" strokeDasharray=\"56.5\" strokeDashoffset={56.5 - (percent * 56.5)} className=\"transition-all\" />\n                    </svg>\n\n                    <div className=\"absolute w-full h-full\" style={{ transform: `rotate(${angle}deg)` }}>\n                        <div className=\"mx-auto mt-1 w-0.5 h-1.5 rounded bg-white shadow-[0_0_2px_#fff]\" />\n                    </div>\n                </div>\n                <span className=\"text-[8px] font-mono text-[#666] uppercase group-hover:text-silver-dark\">{label}</span>\n            </div>\n        );\n    };\n\n    return (\n        <div className=\"w-[200px] h-[60px] bg-[#111] border-b border-[#222] flex items-center justify-between px-3 shadow-2xl shrink-0 z-30 group/trackControl hover:bg-[#151517] transition-colors\">\n            <div className=\"flex flex-col gap-1 w-24\">\n                <div className=\"flex justify-between items-center\">\n                    <span className=\"text-[9px] font-bold truncate tracking-widest uppercase\" style={{ color }}>{trackName}</span>\n                    <button onClick={() => removeTrack(trackId)} className=\"opacity-0 group-hover/trackControl:opacity-100 text-red-500/50 hover:text-red-500 transition-all\">\n                        <Trash2 size={10} />\n                    </button>\n                </div>\n                <div className=\"flex gap-1.5 mt-1\">\n                    <button\n                        onClick={() => toggleMuteStore(trackId)}\n                        className={`w-7 py-1 rounded-sm text-[8px] font-bold transition-all ${fader.isMuted ? 'bg-red-600 border-red-600 text-black shadow-[0_0_10px_rgba(255,0,0,0.5)]' : 'bg-[#1a1a1a] border border-[#333] text-[#666]'}`}\n                    >\n                        M\n                    </button>\n                    <button\n                        onClick={() => toggleSoloStore(trackId)}\n                        className={`w-7 py-1 rounded-sm text-[8px] font-bold transition-all ${fader.isSoloed ? 'bg-[#ffaa00] border-[#ffaa00] text-black shadow-[0_0_10px_rgba(255,170,0,0.5)]' : 'bg-[#1a1a1a] border border-[#333] text-[#666]'}`}\n                    >\n                        S\n                    </button>\n                </div>\n            </div>\n\n            <div className=\"flex gap-3 items-center\">\n                {renderKnob(fader.pan, -100, 100, 'PAN', (v) => setPanStore(trackId, v), true)}\n                {renderKnob(fader.value, 0, 100, 'VOL', (v) => setFaderValue(trackId, v), false)}\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;;;;;;;AAQO,SAAS,gBAAgB,EAAE,OAAO,EAAE,SAAS,EAAE,KAAK,EAAwB;;IAC/E,MAAM,QAAQ,IAAA,yKAAW;8CAAC,CAAC,QAAU,MAAM,MAAM,CAAC,IAAI;sDAAC,CAAC,IAAM,EAAE,EAAE,KAAK;;;IACvE,MAAM,gBAAgB,IAAA,yKAAW;sDAAC,CAAC,QAAU,MAAM,aAAa;;IAChE,MAAM,cAAc,IAAA,yKAAW;oDAAC,CAAC,QAAU,MAAM,MAAM;;IACvD,MAAM,kBAAkB,IAAA,yKAAW;wDAAC,CAAC,QAAU,MAAM,UAAU;;IAC/D,MAAM,kBAAkB,IAAA,yKAAW;wDAAC,CAAC,QAAU,MAAM,UAAU;;IAC/D,MAAM,cAAc,IAAA,yKAAW;oDAAC,CAAC,QAAU,MAAM,WAAW;;IAE5D,IAAI,CAAC,OAAO,OAAO;IAEnB,4BAA4B;IAC5B,IAAA,6MAAS;qCAAC;YAAQ,qLAAW,CAAC,cAAc,CAAC,SAAS,MAAM,KAAK,GAAG;QAAM;oCAAG;QAAC,MAAM,KAAK;QAAE;KAAQ;IACnG,IAAA,6MAAS;qCAAC;YAAQ,qLAAW,CAAC,WAAW,CAAC,SAAS,MAAM,GAAG,GAAG;QAAM;oCAAG;QAAC,MAAM,GAAG;QAAE;KAAQ;IAC5F,IAAA,6MAAS;qCAAC;YAAQ,qLAAW,CAAC,YAAY,CAAC,SAAS,MAAM,OAAO;QAAG;oCAAG;QAAC,MAAM,OAAO;QAAE;KAAQ;IAC/F,IAAA,6MAAS;qCAAC;YAAQ,qLAAW,CAAC,YAAY,CAAC,SAAS,MAAM,QAAQ;QAAG;oCAAG;QAAC,MAAM,QAAQ;QAAE;KAAQ;IAEjG,sCAAsC;IACtC,MAAM,aAAa,CACf,OACA,KACA,KACA,OACA,UACA,YAAqB,KAAK;QAE1B,uCAAuC;QACvC,MAAM,UAAU,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,GAAG;QAC1C,MAAM,QAAQ,CAAC,MAAM,UAAU;QAE/B,MAAM,kBAAkB,CAAC;YACrB,EAAE,cAAc;YAChB,MAAM,SAAS,EAAE,OAAO;YACxB,MAAM,WAAW;YAEjB,MAAM,cAAc,CAAC;gBACjB,MAAM,SAAS,CAAC,SAAS,UAAU,OAAO,IAAI,KAAK,kBAAkB;gBACrE,IAAI,SAAS,WAAW;gBACxB,SAAS,KAAK,GAAG,CAAC,KAAK,KAAK,GAAG,CAAC,KAAK;gBACrC,SAAS,KAAK,KAAK,CAAC;YACxB;YAEA,MAAM,YAAY;gBACd,OAAO,mBAAmB,CAAC,aAAa;gBACxC,OAAO,mBAAmB,CAAC,WAAW;YAC1C;YAEA,OAAO,gBAAgB,CAAC,aAAa;YACrC,OAAO,gBAAgB,CAAC,WAAW;QACvC;QAEA,qBACI,gOAAC;YAAI,WAAU;;8BACX,gOAAC;oBACG,WAAU;oBACV,aAAa;;sCAEb,gOAAC;4BAAI,WAAU;4BAAkD,SAAQ;;8CACrE,gOAAC;oCAAO,IAAG;oCAAK,IAAG;oCAAK,GAAE;oCAAK,MAAK;oCAAO,QAAO;oCAAO,aAAY;oCAAI,iBAAgB;;;;;;8CACzF,gOAAC;oCAAO,IAAG;oCAAK,IAAG;oCAAK,GAAE;oCAAK,MAAK;oCAAO,QAAQ;oCAAO,aAAY;oCAAI,iBAAgB;oCAAO,kBAAkB,OAAQ,UAAU;oCAAO,WAAU;;;;;;;;;;;;sCAG1J,gOAAC;4BAAI,WAAU;4BAAyB,OAAO;gCAAE,WAAW,CAAC,OAAO,EAAE,MAAM,IAAI,CAAC;4BAAC;sCAC9E,cAAA,gOAAC;gCAAI,WAAU;;;;;;;;;;;;;;;;;8BAGvB,gOAAC;oBAAK,WAAU;8BAA2E;;;;;;;;;;;;IAGvG;IAEA,qBACI,gOAAC;QAAI,WAAU;;0BACX,gOAAC;gBAAI,WAAU;;kCACX,gOAAC;wBAAI,WAAU;;0CACX,gOAAC;gCAAK,WAAU;gCAA0D,OAAO;oCAAE;gCAAM;0CAAI;;;;;;0CAC7F,gOAAC;gCAAO,SAAS,IAAM,YAAY;gCAAU,WAAU;0CACnD,cAAA,gOAAC,0PAAM;oCAAC,MAAM;;;;;;;;;;;;;;;;;kCAGtB,gOAAC;wBAAI,WAAU;;0CACX,gOAAC;gCACG,SAAS,IAAM,gBAAgB;gCAC/B,WAAW,CAAC,wDAAwD,EAAE,MAAM,OAAO,GAAG,6EAA6E,iDAAiD;0CACvN;;;;;;0CAGD,gOAAC;gCACG,SAAS,IAAM,gBAAgB;gCAC/B,WAAW,CAAC,wDAAwD,EAAE,MAAM,QAAQ,GAAG,mFAAmF,iDAAiD;0CAC9N;;;;;;;;;;;;;;;;;;0BAMT,gOAAC;gBAAI,WAAU;;oBACV,WAAW,MAAM,GAAG,EAAE,CAAC,KAAK,KAAK,OAAO,CAAC,IAAM,YAAY,SAAS,IAAI;oBACxE,WAAW,MAAM,KAAK,EAAE,GAAG,KAAK,OAAO,CAAC,IAAM,cAAc,SAAS,IAAI;;;;;;;;;;;;;AAI1F;GArGgB;;QACE,yKAAW;QACH,yKAAW;QACb,yKAAW;QACP,yKAAW;QACX,yKAAW;QACf,yKAAW;;;KANnB"}},
    {"offset": {"line": 1496, "column": 0}, "map": {"version":3,"sources":["file:///Users/odgmusic/development/Da%20Graba_Studio/components/daw/PianoRoll.tsx"],"sourcesContent":["import React from 'react';\nimport {\n    Settings2, Play, MousePointer2, Scissors, PenTool,\n    Eraser, Volume2, Maximize2, Crosshair, ArrowRightLeft,\n    Link2, Navigation, Focus\n} from 'lucide-react';\n\n/**\n * PianoRoll Component\n * Styled after Logic Pro X's Piano Roll editor.\n * Features a lighter gray grid, comprehensive toolbar, and velocity-colored notes.\n */\nexport function PianoRoll() {\n    // Generate 4 octaves of keys\n    const keys = Array.from({ length: 48 }, (_, i) => {\n        const noteIndex = i % 12;\n        const isBlack = [1, 3, 6, 8, 10].includes(noteIndex);\n        const noteName = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'][noteIndex];\n        const octave = Math.floor(i / 12) + 2; // Start from C2\n        return { id: i, isBlack, noteName, octave, isC: noteIndex === 0 };\n    });\n\n    return (\n        <div className=\"w-full h-full bg-[#1E1E22] flex flex-col border-t border-black/40 shadow-[0_-20px_60px_rgba(0,0,0,0.6)] font-sans relative\">\n\n            {/* Top Toolbar (Logic Pro X Inspired) */}\n            <div className=\"flex items-center justify-between px-4 py-2 border-b border-[#111] bg-[#2D2D32] shrink-0 shadow-lg z-30\">\n\n                {/* Left controls: Menus & Tools */}\n                <div className=\"flex items-center gap-4\">\n                    <div className=\"flex items-center gap-1\">\n                        <button className=\"px-2.5 py-1 text-[11px] font-bold text-[#AAA] hover:text-white bg-transparent hover:bg-white/5 rounded transition-all\">Edit</button>\n                        <button className=\"px-2.5 py-1 text-[11px] font-bold text-[#AAA] hover:text-white bg-transparent hover:bg-white/5 rounded transition-all\">Functions</button>\n                        <button className=\"px-2.5 py-1 text-[11px] font-bold text-[#AAA] hover:text-white bg-transparent hover:bg-white/5 rounded transition-all\">View</button>\n                    </div>\n\n                    <div className=\"w-px h-6 bg-black/30 mx-1\" />\n\n                    {/* Primary & Secondary Tools */}\n                    <div className=\"flex items-center gap-1.5 p-1 bg-black/20 rounded-md border border-white/5\">\n                        <button className=\"p-1.5 px-3 text-[#4A90E2] bg-[#1A1A1C] rounded shadow-[0_2px_5px_rgba(0,0,0,0.3)] border border-white/10\"><MousePointer2 size={13} /></button>\n                        <button className=\"p-1.5 px-3 text-[#888] hover:text-white transition-colors\"><PenTool size={13} /></button>\n                        <button className=\"p-1.5 px-3 text-[#888] hover:text-white transition-colors\"><Eraser size={13} /></button>\n                        <button className=\"p-1.5 px-3 text-[#888] hover:text-white transition-colors\"><Scissors size={13} /></button>\n                    </div>\n\n                    <div className=\"w-px h-6 bg-black/30 mx-1\" />\n\n                    {/* Logic Toggles */}\n                    <div className=\"flex items-center gap-2\">\n                        <button className=\"p-2 text-[#666] hover:text-white bg-black/20 rounded border border-white/5\"><Navigation size={12} className=\"rotate-45\" /></button>\n                        <button className=\"p-2 text-orange-400 bg-orange-400/10 rounded border border-orange-400/20 shadow-[0_0_10px_rgba(251,146,60,0.1)]\"><Link2 size={12} /></button>\n                    </div>\n                </div>\n\n                {/* Center Tabs: Seamless Switch */}\n                <div className=\"flex bg-black/40 rounded-lg border border-white/5 p-1 shadow-inner ring-1 ring-black/50\">\n                    <button className=\"px-8 py-1 text-[10px] font-black tracking-widest text-white bg-gradient-to-b from-[#4A6B9C] to-[#3A5B8C] rounded shadow-[0_1px_3px_rgba(0,0,0,0.4)] ring-1 ring-white/10\">PIANO ROLL</button>\n                    <button className=\"px-8 py-1 text-[10px] font-black tracking-widest text-[#666] hover:text-white transition-all uppercase\">Score</button>\n                    <button className=\"px-8 py-1 text-[10px] font-black tracking-widest text-[#666] hover:text-white transition-all uppercase\">Step Editor</button>\n                </div>\n\n                {/* Right controls: Info & Snap */}\n                <div className=\"flex items-center gap-6\">\n                    <div className=\"flex flex-col items-end\">\n                        <span className=\"text-[9px] font-black text-[#555] tracking-widest uppercase\">Position</span>\n                        <div className=\"text-[11px] font-mono text-[#4A90E2] tracking-tighter shadow-sm bg-black/20 px-2 rounded\">5 1 1 1</div>\n                    </div>\n\n                    <div className=\"flex items-center gap-3 bg-black/20 px-3 py-1 rounded border border-white/5\">\n                        <span className=\"text-[9px] font-black text-[#555] uppercase tracking-widest\">Snap</span>\n                        <select className=\"bg-transparent border-none text-[11px] font-bold text-[#AAA] outline-none cursor-pointer hover:text-white transition-colors\">\n                            <option>Smart</option>\n                            <option>1/16</option>\n                        </select>\n                    </div>\n                </div>\n            </div>\n\n            {/* Main Area */}\n            <div className=\"flex flex-1 overflow-hidden relative bg-[#1E1E22]\">\n\n                {/* Left Inspector Panel (Dark Metal Style) */}\n                <div className=\"w-[200px] bg-[#26262A] border-r border-black flex flex-col shrink-0 shadow-[10px_0_30px_rgba(0,0,0,0.3)] z-20\">\n                    <div className=\"p-4 border-b border-black/40 bg-[#1A1A1D]\">\n                        <div className=\"text-[11px] font-black tracking-widest text-[#E0E0E0] uppercase flex items-center gap-2\">\n                            <Focus size={12} className=\"text-[#4A90E2]\" /> INSPECTOR\n                        </div>\n                        <div className=\"text-[9px] text-[#555] tracking-widest mt-1\">Región: \"Orquesta Bolero\"</div>\n                    </div>\n\n                    <div className=\"p-4 space-y-6\">\n                        <div className=\"space-y-2\">\n                            <div className=\"text-[10px] font-black tracking-widest text-[#666] uppercase\">Time Quantize</div>\n                            <div className=\"flex rounded-md border border-black overflow-hidden shadow-lg\">\n                                <select className=\"flex-1 bg-[#111] text-[11px] text-[#AAA] py-2 px-3 outline-none hover:text-white transition-colors\">\n                                    <option>1/16 Note</option>\n                                    <option>1/8 Note</option>\n                                </select>\n                                <button className=\"bg-[#4A90E2] text-white px-3 text-[11px] font-black border-l border-black shadow-[inset_0_1px_1px_rgba(255,255,255,0.3)]\">Q</button>\n                            </div>\n                        </div>\n\n                        <div className=\"space-y-4 pt-4 border-t border-white/5\">\n                            <div className=\"flex justify-between items-center\">\n                                <div className=\"text-[10px] font-black tracking-widest text-[#666] uppercase\">Velocity</div>\n                                <div className=\"text-[10px] font-mono text-[#4A90E2] bg-black/40 px-2 rounded\">100</div>\n                            </div>\n                            <div className=\"relative group py-2\">\n                                <div className=\"h-1 bg-black rounded-full overflow-hidden\">\n                                    <div className=\"h-full bg-gradient-to-r from-blue-600 to-cyan-400 w-[70%]\" />\n                                </div>\n                                <div className=\"absolute top-1/2 left-[70%] -translate-y-1/2 w-3 h-3 bg-white rounded-full shadow-[0_0_10px_rgba(255,255,255,0.5)] border border-black cursor-pointer group-hover:scale-125 transition-transform\" />\n                            </div>\n                        </div>\n\n                        {/* Interactive Scale Quantize */}\n                        <div className=\"space-y-2 pt-4 border-t border-white/5\">\n                            <div className=\"text-[10px] font-black tracking-widest text-[#666] uppercase\">Scale Quantize</div>\n                            <div className=\"flex flex-col gap-1\">\n                                <select className=\"bg-[#111] border border-black rounded-md text-[11px] text-[#AAA] py-1.5 px-2 outline-none\">\n                                    <option>C Major</option>\n                                </select>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                {/* Piano Keys & Grid Container */}\n                <div className=\"flex flex-1 overflow-y-auto overflow-x-hidden relative custom-scrollbar\">\n\n                    {/* Vertical Piano Keys (Ivory & Ebony Style) */}\n                    <div className=\"w-[60px] flex flex-col-reverse bg-[#EAEAEA] border-r border-black sticky left-0 z-30 shadow-[5px_0_15px_rgba(0,0,0,0.4)] shrink-0\">\n                        {keys.map((key) => (\n                            <div\n                                key={key.id}\n                                className={`w-full relative flex flex-col justify-end items-center pr-1 border-b border-black/10 ${key.isBlack\n                                    ? 'h-[14px] bg-gradient-to-r from-[#111] to-[#333] border-black z-20 shadow-[0_2px_4px_rgba(0,0,0,0.5)] -my-[7px] rounded-r-sm'\n                                    : 'h-[24px] bg-gradient-to-r from-[#F0F0F0] to-[#E0E0E0] border-[#BBB]'\n                                    }`}\n                                style={key.isBlack ? { width: '65%', borderRight: '2px solid black' } : {}}\n                            >\n                                {key.isC && !key.isBlack && (\n                                    <span className=\"text-[10px] font-black text-[#888] absolute right-2 bottom-1 tracking-tighter opacity-60\">\n                                        {key.noteName}{key.octave}\n                                    </span>\n                                )}\n                            </div>\n                        ))}\n                    </div>\n\n                    {/* MIDI Grid (Pro Dark Theme) */}\n                    <div className=\"flex-1 relative bg-[#26262A] min-w-[2000px]\">\n\n                        {/* High-Contrast Professional Grid Pattern */}\n                        <div\n                            className=\"absolute inset-0 pointer-events-none\"\n                            style={{\n                                backgroundImage: `\n                                    linear-gradient(0deg, rgba(255,255,255,0.03) 1px, transparent 1px),\n                                    linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px),\n                                    linear-gradient(90deg, rgba(0,0,0,0.5) 1px, transparent 1px),\n                                    linear-gradient(90deg, rgba(255,255,255,0.08) 1px, transparent 1px)\n                                `,\n                                backgroundSize: '100% 12px, 30px 100%, 120px 100%, 480px 100%'\n                            }}\n                        />\n\n                        {/* Top Measure Ruler (Metallic Style) */}\n                        <div className=\"h-8 sticky top-0 bg-[#2D2D32] border-b border-black z-40 flex text-[10px] font-black text-[#666] font-mono shadow-md\">\n                            {[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16].map(m => (\n                                <div key={m} className=\"w-[120px] px-2 flex items-end pb-1.5 border-l border-white/5 relative group\">\n                                    <span className=\"group-hover:text-[#AAA] transition-colors\">{m}</span>\n                                    <div className=\"absolute bottom-0 left-[30px] h-1.5 w-px bg-white/10\" />\n                                    <div className=\"absolute bottom-0 left-[60px] h-3 w-px bg-white/10\" />\n                                    <div className=\"absolute bottom-0 left-[90px] h-1.5 w-px bg-white/10\" />\n                                </div>\n                            ))}\n                        </div>\n\n                        {/* Green Region Header (Glossy Glass) */}\n                        <div className=\"h-5 absolute top-8 left-0 right-0 bg-[#7ED321]/30 backdrop-blur-sm border-b border-[#7ED321]/50 flex items-center px-4 z-20 shadow-[0_2px_10px_rgba(126,211,33,0.1)]\">\n                            <span className=\"text-[9px] font-black text-[#A4ECA1] flex items-center gap-2 tracking-[0.2em] uppercase\">\n                                <Play size={10} fill=\"currentColor\" /> REGION: HARP_BOLERO_01\n                            </span>\n                        </div>\n\n                        {/* Playhead line (Liquid Neon) */}\n                        <div className=\"absolute top-0 bottom-0 left-[480px] w-[2px] bg-white z-[45] shadow-[0_0_15px_rgba(255,255,255,0.8)]\">\n                            <div className=\"w-0 h-0 border-l-[6px] border-r-[6px] border-t-[8px] border-l-transparent border-r-transparent border-t-white absolute -top-1 -left-[5px]\" />\n                        </div>\n\n                        {/* Advanced MIDI Notes (3D Glass Style) */}\n                        {[\n                            { t: 120, l: 30, w: 200, color: 'bg-[#F29F94]', border: 'border-[#D04033]' },\n                            { t: 288, l: 10, w: 40, color: 'bg-[#ED6255]', border: 'border-[#C52013]' },\n                            { t: 276, l: 60, w: 120, color: 'bg-[#F29F94]', border: 'border-[#D04033]' },\n                            { t: 264, l: 200, w: 80, color: 'bg-[#E2A04A]', border: 'border-[#A05D17]' },\n                            { t: 240, l: 320, w: 150, color: 'bg-[#4A90E2]', border: 'border-[#2A60A2]' },\n                            { t: 300, l: 500, w: 60, color: 'bg-[#D6D657]', border: 'border-[#A8A811]' },\n                            { t: 216, l: 600, w: 90, color: 'bg-[#FF6B00]', border: 'border-[#CC5500]' },\n                            { t: 312, l: 720, w: 110, color: 'bg-[#ED6255]', border: 'border-[#C52013]' },\n                        ].map((note, idx) => (\n                            <div\n                                key={idx}\n                                className={`absolute rounded-[2px] shadow-lg flex items-center overflow-hidden hover:scale-y-110 active:scale-95 transition-all cursor-pointer group select-none ${note.color} ${note.border} border`}\n                                style={{ top: `${note.t}px`, left: `${note.l}px`, width: `${note.w}px`, height: '10px' }}\n                            >\n                                <div className=\"absolute inset-0 bg-gradient-to-b from-white/30 to-transparent pointer-events-none\" />\n                                <div className=\"ml-1 w-1 h-1 rounded-full bg-white/50 opacity-0 group-hover:opacity-100\" />\n                            </div>\n                        ))}\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2313, "column": 0}, "map": {"version":3,"sources":["file:///Users/odgmusic/development/Da%20Graba_Studio/lib/modal-client.ts"],"sourcesContent":["/**\n * Modal.com Client wrapper for Next.js (Client-side / Server-side)\n * As the Modal SDK is Python, we trigger Modal Functions via their HTTP Webhook URLs,\n * or mock the latency if no URL is provided yet.\n */\n\nexport const modalClient = {\n    /**\n     * Calls the remote `process_vocal_cloning` function in Modal.\n     */\n    async process_vocal_cloning(options?: { artistId?: string }) {\n        console.log('[Modal Client] Executing remote Modal function: process_vocal_cloning');\n\n        // Simulate network latency of the remote GPU inference/processing\n        await new Promise((resolve) => setTimeout(resolve, 3000));\n\n        // Return mock success payload that signals the frontend to adjust mix\n        return {\n            success: true,\n            message: 'Vocal cloned and processed successfully.',\n            mixParameters: {\n                vocalLevel: 85,\n                beatLevel: 75\n            }\n        };\n    }\n};\n"],"names":[],"mappings":"AAAA;;;;CAIC;;;;AAEM,MAAM,cAAc;IACvB;;KAEC,GACD,MAAM,uBAAsB,OAA+B;QACvD,QAAQ,GAAG,CAAC;QAEZ,kEAAkE;QAClE,MAAM,IAAI,QAAQ,CAAC,UAAY,WAAW,SAAS;QAEnD,sEAAsE;QACtE,OAAO;YACH,SAAS;YACT,SAAS;YACT,eAAe;gBACX,YAAY;gBACZ,WAAW;YACf;QACJ;IACJ;AACJ"}},
    {"offset": {"line": 2346, "column": 0}, "map": {"version":3,"sources":["file:///Users/odgmusic/development/Da%20Graba_Studio/components/daw/TransportBar.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n    Play, Square, Circle, SkipBack, SkipForward,\n    Repeat, Settings2, Activity, Music, ActivitySquare, Upload, Download\n} from 'lucide-react';\nimport { useDAWStore } from '@/store/useDAWStore';\nimport { modalClient } from '@/lib/modal-client';\nimport { audioEngine } from '@/lib/audio-engine-bridge';\n\nexport function TransportBar() {\n    // --- State ---\n    const [isPlaying, setIsPlaying] = useState(false);\n    const [isRecording, setIsRecording] = useState(false);\n    const [playhead, setPlayhead] = useState(0);\n\n    // --- Global DAW Store ---\n    const isTraining = useDAWStore((state) => state.isTraining);\n    const activeBottomPanel = useDAWStore((state) => state.activeBottomPanel);\n    const isMetronomeOn = useDAWStore((state) => state.isMetronomeOn);\n    const setTrainingStatus = useDAWStore((state) => state.setTrainingStatus);\n    const setFaderValue = useDAWStore((state) => state.setFaderValue);\n    const setActiveBottomPanel = useDAWStore((state) => state.setActiveBottomPanel);\n    const toggleMetronome = useDAWStore((state) => state.toggleMetronome);\n    const setIsPlayingStore = useDAWStore((state) => state.setIsPlaying);\n    const setMasterLevel = useDAWStore((state) => state.setMasterLevel);\n    const isFullMixer = useDAWStore((state) => state.isFullMixer);\n    const setFullMixer = useDAWStore((state) => state.setFullMixer);\n\n    // --- Audio Engine Sync ---\n    useEffect(() => {\n        let interval: NodeJS.Timeout;\n        if (isPlaying) {\n            interval = setInterval(() => {\n                setPlayhead(audioEngine.getPlayheadPosition());\n                // Poll master level for speaker animations\n                setMasterLevel(audioEngine.getVUMeterLevel('master'));\n            }, 50);\n        } else {\n            setMasterLevel(0);\n        }\n        return () => clearInterval(interval);\n    }, [isPlaying, setMasterLevel]);\n\n    const handleTogglePlay = () => {\n        if (isPlaying) {\n            audioEngine.pause();\n            setIsPlayingStore(false);\n        } else {\n            audioEngine.play();\n            setIsPlayingStore(true);\n        }\n        setIsPlaying(!isPlaying);\n    };\n\n    const handleAutoMix = async () => {\n        setTrainingStatus(true);\n        try {\n            const response = await modalClient.process_vocal_cloning();\n            if (response.success) {\n                setFaderValue('vocal', response.mixParameters.vocalLevel);\n                setFaderValue('beat', response.mixParameters.beatLevel);\n                setFaderValue('bass', 65);\n                setFaderValue('fx', 50);\n            }\n        } catch (error) {\n            console.error(\"Auto Mix Modal training failed:\", error);\n        } finally {\n            setTrainingStatus(false);\n        }\n    };\n\n    return (\n        <div className=\"h-16 flex items-center justify-between px-4 border-b border-[#222] bg-[#1C1C1E] shadow-md z-30 shrink-0 font-sans\">\n\n            {/* LEFT: Branding & Auto-Mix */}\n            <div className=\"flex items-center gap-4 w-1/3\">\n                <div className=\"border border-[#FF6B00]/30 px-3 py-1 rounded bg-black/50 shadow-[0_0_10px_rgba(255,107,0,0.1)]\">\n                    <h1 className=\"text-sm font-sans tracking-widest text-white\">\n                        DA GRABA <span className=\"font-light text-[#FF6B00]\">DAW</span>\n                    </h1>\n                </div>\n\n                <button\n                    onClick={handleAutoMix}\n                    disabled={isTraining}\n                    className=\"flex items-center gap-2 bg-[#111] hover:bg-[#1A1A1C] border border-[#FF6B00]/50 text-[#FF6B00] px-3 py-1.5 rounded shadow-[0_0_5px_rgba(255,107,0,0.2)] transition-colors disabled:opacity-50 text-[10px] font-bold tracking-widest\"\n                >\n                    <Activity size={12} />\n                    AUTO-MIX IA\n                </button>\n            </div>\n\n            {/* CENTER: True Transport Controls (Logic/Pro Tools Style) */}\n            <div className=\"flex flex-1 items-center justify-center gap-6\">\n\n                {/* Transport Buttons */}\n                <div className=\"flex items-center gap-1 bg-[#111] p-1 rounded-md border border-[#333] shadow-inner\">\n                    <button className=\"p-1.5 text-[#AAA] hover:text-white transition-colors rounded hover:bg-[#222]\">\n                        <SkipBack size={16} />\n                    </button>\n                    <button className=\"p-1.5 text-[#AAA] hover:text-white transition-colors rounded hover:bg-[#222]\">\n                        <SkipForward size={16} />\n                    </button>\n                    <button className={`p-1.5 transition-colors rounded hover:bg-[#222] ${isPlaying ? 'text-white' : 'text-[#AAA] hover:text-white'}`} onClick={handleTogglePlay}>\n                        <Square size={16} fill={isPlaying ? \"currentColor\" : \"none\"} />\n                    </button>\n                    <button className={`p-1.5 transition-colors rounded hover:bg-[#222] ${isPlaying ? 'text-[#A4ECA1]' : 'text-[#AAA] hover:text-white'}`} onClick={handleTogglePlay}>\n                        <Play size={16} fill={isPlaying ? \"currentColor\" : \"none\"} />\n                    </button>\n                    <button className={`p-1.5 transition-colors rounded hover:bg-[#222] ${isRecording ? 'text-red-500' : 'text-[#AAA] hover:text-red-400'}`} onClick={() => setIsRecording(!isRecording)}>\n                        <Circle size={16} fill={isRecording ? \"currentColor\" : \"none\"} />\n                    </button>\n                </div>\n\n                {/* LCD Display */}\n                <div className=\"flex bg-[#0A0A0C] border border-[#333] rounded-md shadow-[inset_0_2px_10px_rgba(0,0,0,0.8)] px-4 py-1.5 items-center gap-6 min-w-[300px] justify-center text-[#E0E0E0]\">\n                    {/* Time / Measure */}\n                    <div className=\"flex flex-col items-center\">\n                        <div className=\"flex items-baseline gap-1 font-mono text-lg font-light tracking-wider text-[#A4ECA1]\">\n                            <span>{Math.floor(playhead / 2) + 1}</span>\n                            <span className=\"text-[#666] text-sm\">:</span>\n                            <span>{Math.floor((playhead % 2) * 2) + 1}</span>\n                            <span className=\"text-[#666] text-sm\">:</span>\n                            <span>1</span>\n                            <span className=\"text-[#666] text-sm\">:</span>\n                            <span className=\"text-xs\">{((playhead * 1000) % 1000).toFixed(0).padStart(3, '0')}</span>\n                        </div>\n                        <span className=\"text-[8px] text-[#666] uppercase tracking-widest\">Measure / Time</span>\n                    </div>\n\n                    <div className=\"w-px h-6 bg-[#222]\" />\n\n                    {/* Tempo / Signature */}\n                    <div className=\"flex gap-4\">\n                        <div className=\"flex flex-col items-center\">\n                            <span className=\"font-mono text-sm text-[#4A90E2]\">120.00</span>\n                            <span className=\"text-[8px] text-[#666] uppercase tracking-widest\">Tempo</span>\n                        </div>\n                        <div className=\"flex flex-col items-center\">\n                            <span className=\"font-mono text-sm text-[#E2A04A]\">4/4</span>\n                            <span className=\"text-[8px] text-[#666] uppercase tracking-widest\">Sig</span>\n                        </div>\n                    </div>\n                </div>\n\n                {/* Function Toggles */}\n                <div className=\"flex items-center gap-1 bg-[#111] p-1 rounded-md border border-[#333] shadow-inner\">\n                    <button className=\"p-1.5 text-[#E2A04A] bg-[#222] rounded transition-colors border border-[#333]\">\n                        <Repeat size={16} />\n                    </button>\n                    <button\n                        onClick={() => toggleMetronome()}\n                        className={`p-1.5 rounded transition-colors border border-[#333] ${isMetronomeOn ? 'text-[#4A90E2] bg-blue-500/20 glow-blue' : 'text-[#666] bg-[#222] hover:text-[#4A90E2]'}`}\n                    >\n                        <ActivitySquare size={16} />\n                    </button>\n                </div>\n            </div>\n\n            {/* RIGHT: Panel Toggles & Settings */}\n            <div className=\"flex items-center gap-4 w-1/3 justify-end\">\n                {/* Console Navigation Toggles */}\n                <div className=\"flex bg-[#111] p-1 border border-white/5 rounded-lg shadow-xl ring-1 ring-black/50\">\n                    <button\n                        onClick={() => {\n                            setFullMixer(true);\n                            setActiveBottomPanel('mixer');\n                        }}\n                        className={`px-4 py-1.5 rounded-md text-[10px] font-black tracking-widest transition-all duration-300 ${isFullMixer ? 'bg-gradient-to-b from-orange-500 to-orange-700 text-white shadow-[0_0_15px_rgba(249,115,22,0.4)] border border-orange-400/50' : 'text-white/30 hover:text-white/60 hover:bg-white/5'}`}\n                    >\n                        MIX\n                    </button>\n                    <button\n                        onClick={() => {\n                            setFullMixer(false);\n                            setActiveBottomPanel('closed');\n                        }}\n                        className={`px-4 py-1.5 rounded-md text-[10px] font-black tracking-widest transition-all duration-300 ${!isFullMixer ? 'bg-gradient-to-b from-neutral-600 to-neutral-800 text-white shadow-[0_0_15px_rgba(255,255,255,0.05)] border border-white/10' : 'text-white/30 hover:text-white/60 hover:bg-white/5'}`}\n                    >\n                        EDIT\n                    </button>\n                </div>\n\n                <div className=\"w-[1px] h-6 bg-white/5 mx-2\" />\n\n                <div className=\"flex bg-[#111] p-1 border border-[#333] rounded shadow-sm\">\n                    <button\n                        onClick={() => {\n                            setFullMixer(false);\n                            setActiveBottomPanel(activeBottomPanel === 'mixer' ? 'closed' : 'mixer');\n                        }}\n                        className={`px-3 py-1 rounded-sm text-[10px] font-bold tracking-widest transition-colors ${activeBottomPanel === 'mixer' && !isFullMixer ? 'bg-[#5A5A60] text-white shadow-[inset_0_1px_5px_rgba(0,0,0,0.5)]' : 'text-[#888] hover:text-white hover:bg-[#222]'\n                            }`}\n                    >\n                        FX\n                    </button>\n                    <button\n                        onClick={() => {\n                            setFullMixer(false);\n                            setActiveBottomPanel(activeBottomPanel === 'piano_roll' ? 'closed' : 'piano_roll');\n                        }}\n                        className={`px-3 py-1 rounded-sm text-[10px] font-bold tracking-widest transition-colors flex items-center gap-1 ${activeBottomPanel === 'piano_roll' ? 'bg-[#FF6B00] text-black shadow-[0_0_10px_rgba(255,107,0,0.6)]' : 'text-[#888] hover:text-white hover:bg-[#222]'\n                            }`}\n                    >\n                        <Music size={12} />\n                        PIANO\n                    </button>\n                </div>\n\n                <div className=\"flex items-center gap-2 ml-2\">\n                    <button \n                        onClick={() => {\n                            const input = document.createElement('input');\n                            input.type = 'file';\n                            input.accept = 'audio/*';\n                            input.onchange = (e) => {\n                                const file = (e.target as HTMLInputElement).files?.[0];\n                                if (file) alert(`Audio importado al Studio: ${file.name}`);\n                            };\n                            input.click();\n                        }}\n                        className=\"p-1.5 text-[#AAA] hover:text-white transition-colors rounded hover:bg-[#222]\" title=\"Importar Audio\"\n                    >\n                        <Upload size={16} />\n                    </button>\n                    <button \n                        onClick={() => alert('Mezcla final exportada correctamente.')}\n                        className=\"p-1.5 text-[#AAA] hover:text-[#A4ECA1] transition-colors rounded hover:bg-[#222]\" title=\"Exportar Mezcla\"\n                    >\n                        <Download size={16} />\n                    </button>\n                    <button className=\"p-1.5 text-[#666] hover:text-[#AAA] transition-colors rounded hover:bg-[#222]\">\n                        <Settings2 size={16} />\n                    </button>\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2992, "column": 0}, "map": {"version":3,"sources":["file:///Users/odgmusic/development/Da%20Graba_Studio/components/daw/StudioChat.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useRef, useEffect, useCallback } from 'react';\nimport { Send, Sparkles, Wand2, Mic2, Scissors, PlayCircle, ChevronRight, MessageSquare, Mic, MicOff, Volume2 } from 'lucide-react';\nimport { useDAWStore } from '@/store/useDAWStore';\n\n// Type definition for Web Speech API\ninterface SpeechRecognition extends EventTarget {\n    continuous: boolean;\n    interimResults: boolean;\n    lang: string;\n    start(): void;\n    stop(): void;\n    onresult: (event: any) => void;\n    onerror: (event: any) => void;\n    onend: () => void;\n}\n\ndeclare global {\n    interface Window {\n        webkitSpeechRecognition: any;\n        SpeechRecognition: any;\n    }\n}\n\nexport function StudioChat() {\n    const addTrack = useDAWStore((state) => state.addTrack);\n    const setTracks = useDAWStore((state) => state.setTracks);\n    const clearTracks = useDAWStore((state) => state.clearTracks);\n    const tracks = useDAWStore((state) => state.tracks);\n\n    const [isOpen, setIsOpen] = useState(false);\n    const [input, setInput] = useState('');\n    const [messages, setMessages] = useState<{ role: 'user' | 'assistant', content: string }[]>([\n        { role: 'assistant', content: '¡Estamos en el studio! El plan está listo. ¿Quieres que genere la primera mitad de los instrumentos o prefieres grabar algo tú primero?' }\n    ]);\n    const [isTyping, setIsTyping] = useState(false);\n    const [isListening, setIsListening] = useState(false);\n    const [isSpeaking, setIsSpeaking] = useState(false);\n\n    const scrollRef = useRef<HTMLDivElement>(null);\n    const recognitionRef = useRef<SpeechRecognition | null>(null);\n    const audioRef = useRef<HTMLAudioElement | null>(null);\n\n    useEffect(() => {\n        if (scrollRef.current) {\n            scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\n        }\n    }, [messages]);\n\n    // Initialize Speech Recognition\n    useEffect(() => {\n        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n        if (SpeechRecognition) {\n            const recognition = new SpeechRecognition();\n            recognition.continuous = true;\n            recognition.interimResults = false;\n            recognition.lang = 'es-ES';\n\n            recognition.onresult = (event: any) => {\n                const transcript = event.results[event.results.length - 1][0].transcript;\n                if (transcript.trim()) {\n                    handleVoiceInput(transcript);\n                }\n            };\n\n            recognition.onerror = (event: any) => {\n                console.error('Speech recognition error', event.error);\n                setIsListening(false);\n            };\n\n            recognition.onend = () => {\n                if (isListening) recognition.start(); // Auto-restart if it should be listening\n            };\n\n            recognitionRef.current = recognition;\n        }\n    }, [isListening]);\n\n    const playJohnVoice = async (text: string) => {\n        try {\n            setIsSpeaking(true);\n            const response = await fetch('/api/ai/tts', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({ text })\n            });\n\n            if (!response.ok) throw new Error('Failed to fetch voice');\n\n            const blob = await response.blob();\n            const url = URL.createObjectURL(blob);\n\n            if (audioRef.current) {\n                audioRef.current.src = url;\n                audioRef.current.play();\n            } else {\n                const audio = new Audio(url);\n                audioRef.current = audio;\n                audio.play();\n            }\n\n            audioRef.current!.onended = () => {\n                setIsSpeaking(false);\n                URL.revokeObjectURL(url);\n            };\n        } catch (error) {\n            console.error('TTS Error:', error);\n            setIsSpeaking(false);\n        }\n    };\n\n    const triggerGeneration = () => {\n        setIsTyping(true);\n        setTimeout(() => {\n            const demoTracks = [\n                { id: 't-beat', name: 'Dark Trap Beat (AI)', color: '#FF6B00' },\n                { id: 't-808', name: 'Heavy 808 Sub', color: '#B026FF' },\n                { id: 't-melody', name: 'Dark Piano Melody', color: '#00F0FF' },\n                { id: 't-perch', name: 'Percussion Loop', color: '#A4ECA1' }\n            ];\n            setTracks(demoTracks);\n            const msg = \"¡Listo! He abierto los tracks en el espacio de trabajo como por arte de magia. He configurado la batería, el bajo y la melodía principal. ¿Escuchamos esta primera parte?\";\n            setMessages(prev => [...prev, { role: 'assistant', content: msg }]);\n            setIsTyping(false);\n            playJohnVoice(msg);\n        }, 1500);\n    };\n\n    const handleSend = async (forcedInput?: string) => {\n        const textToSend = forcedInput || input;\n        if (!textToSend.trim() || isTyping) return;\n\n        setInput('');\n        setMessages(prev => [...prev, { role: 'user', content: textToSend }]);\n\n        const lowInput = textToSend.toLowerCase();\n        if (lowInput.includes('genera') || lowInput.includes('mitad') || lowInput.includes('abre')) {\n            triggerGeneration();\n            return;\n        }\n\n        setIsTyping(true);\n        // Simulation for now - will connect to specialized Production API\n        setTimeout(() => {\n            let response = \"Entendido, estoy trabajando en ello...\";\n\n            if (lowInput.includes('continua') || lowInput.includes('sigue')) {\n                response = \"Perfecto, expandiendo la estructura. Añadiendo variaciones en el beat y texturas para el coro.\";\n            } else if (lowInput.includes('separa') || lowInput.includes('stems')) {\n                response = \"Iniciando proceso de separación de pistas (Stems). Procesando voz, percusión y armonía...\";\n            } else if (lowInput.includes('efecto') || lowInput.includes('bajo')) {\n                response = \"¡Entendido! Añadiendo un compresor y saturación al track del Bajo en el compás solicitado. John se encarga.\";\n            }\n\n            setMessages(prev => [...prev, { role: 'assistant', content: response }]);\n            setIsTyping(false);\n            playJohnVoice(response);\n        }, 1500);\n    };\n\n    const handleVoiceInput = (transcript: string) => {\n        handleSend(transcript);\n    };\n\n    const toggleListening = () => {\n        if (isListening) {\n            recognitionRef.current?.stop();\n            setIsListening(false);\n        } else {\n            recognitionRef.current?.start();\n            setIsListening(true);\n        }\n    };\n\n    return (\n        <div className={`fixed right-8 bottom-32 z-50 transition-all duration-500 flex flex-col items-end ${isOpen ? 'w-80 h-[450px]' : 'w-12 h-12'}`}>\n\n            {/* TOGGLE BUTTON */}\n            <div className=\"flex flex-col gap-3\">\n                <button\n                    onClick={toggleListening}\n                    className={`w-12 h-12 rounded-full flex items-center justify-center transition-all duration-300 shadow-2xl ${isListening ? 'bg-red-500 animate-pulse glow-red' : 'bg-white/5 border border-white/10 hover:bg-white/10'}`}\n                >\n                    {isListening ? <Mic className=\"text-white\" size={20} /> : <MicOff className=\"text-silver-dark\" size={20} />}\n                </button>\n\n                <button\n                    onClick={() => setIsOpen(!isOpen)}\n                    className={`w-12 h-12 rounded-full flex items-center justify-center transition-all duration-300 shadow-2xl ${isOpen ? 'bg-orange-600 scale-90' : 'bg-gradient-to-br from-cyan-glow to-blue-600 glow-cyan hover:scale-110'}`}\n                >\n                    {isOpen ? <ChevronRight className=\"text-white\" /> : <MessageSquare className=\"text-white\" />}\n                </button>\n            </div>\n\n            {/* CHAT WINDOW */}\n            <div className={`mt-4 w-full h-full bg-[#0B1015]/95 backdrop-blur-xl border border-white/10 rounded-2xl flex flex-col overflow-hidden shadow-[0_20px_50px_rgba(0,0,0,0.5)] transition-opacity duration-300 ${isOpen ? 'opacity-100' : 'opacity-0 pointer-events-none'}`}>\n\n                {/* Header */}\n                <div className=\"px-4 py-3 border-b border-white/5 bg-white/5 flex items-center justify-between\">\n                    <div className=\"flex items-center gap-2\">\n                        <Sparkles size={16} className=\"text-cyan-glow\" />\n                        <span className=\"text-xs font-bold tracking-widest text-[#E0E0E0]\">ENGINEER FEEDBACK</span>\n                    </div>\n                    {isSpeaking && <Volume2 size={14} className=\"text-cyan-glow animate-pulse\" />}\n                </div>\n\n                {/* Messages Panel */}\n                <div ref={scrollRef} className=\"flex-1 overflow-y-auto p-4 flex flex-col gap-4 custom-scrollbar\">\n                    {messages.map((m, i) => (\n                        <div key={i} className={`flex flex-col ${m.role === 'user' ? 'items-end' : 'items-start'}`}>\n                            <div className={`max-w-[85%] px-3 py-2 rounded-xl text-xs leading-relaxed ${m.role === 'user'\n                                ? 'bg-orange-600/20 border border-orange-500/30 text-white'\n                                : 'bg-white/5 border border-white/10 text-silver-light'\n                                }`}>\n                                {m.content}\n                            </div>\n                        </div>\n                    ))}\n                    {isTyping && (\n                        <div className=\"flex gap-1 ml-2\">\n                            <div className=\"w-1.5 h-1.5 bg-cyan-glow rounded-full animate-bounce\" />\n                            <div className=\"w-1.5 h-1.5 bg-cyan-glow rounded-full animate-bounce [animation-delay:0.2s]\" />\n                            <div className=\"w-1.5 h-1.5 bg-cyan-glow rounded-full animate-bounce [animation-delay:0.4s]\" />\n                        </div>\n                    )}\n                </div>\n\n                {/* Quick Actions */}\n                <div className=\"px-3 py-2 flex gap-2 overflow-x-auto border-t border-white/5 bg-black/20 no-scrollbar\">\n                    <button\n                        onClick={triggerGeneration}\n                        className=\"whitespace-nowrap flex items-center gap-1.5 px-2 py-1 rounded bg-white/5 border border-white/10 text-[10px] text-silver-dark hover:text-cyan-glow transition-colors\"\n                    >\n                        <Wand2 size={10} /> Generar Mitad\n                    </button>\n                    <button className=\"whitespace-nowrap flex items-center gap-1.5 px-2 py-1 rounded bg-white/5 border border-white/10 text-[10px] text-silver-dark hover:text-white transition-colors\">\n                        <PlayCircle size={10} /> Continuar\n                    </button>\n                    <button\n                        onClick={clearTracks}\n                        className=\"whitespace-nowrap flex items-center gap-1.5 px-2 py-1 rounded bg-white/5 border border-white/10 text-[10px] text-red-400 hover:text-red-300 transition-colors\"\n                    >\n                        <Scissors size={10} /> Limpiar Todo\n                    </button>\n                    <button className=\"whitespace-nowrap flex items-center gap-1.5 px-2 py-1 rounded bg-white/5 border border-white/10 text-[10px] text-silver-dark hover:text-white transition-colors\">\n                        <Mic2 size={10} /> Grabar Hum\n                    </button>\n                </div>\n\n                {/* Input Area */}\n                <div className=\"p-3 bg-black/40 flex items-center gap-2\">\n                    <input\n                        type=\"text\"\n                        value={input}\n                        onChange={(e) => setInput(e.target.value)}\n                        onKeyDown={(e) => e.key === 'Enter' && handleSend()}\n                        placeholder={isListening ? \"Te escucho...\" : \"Dime qué sigue...\"}\n                        className=\"flex-1 bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-xs text-white placeholder:text-gray-600 focus:outline-none focus:border-cyan-glow/50 transition-colors\"\n                    />\n                    <button\n                        onClick={() => handleSend()}\n                        className=\"p-2 bg-orange-600 rounded-lg hover:bg-orange-500 transition-colors shadow-lg\"\n                    >\n                        <Send size={14} className=\"text-white\" />\n                    </button>\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3510, "column": 0}, "map": {"version":3,"sources":["file:///Users/odgmusic/development/Da%20Graba_Studio/app/%5Blocale%5D/studio/page.tsx"],"sourcesContent":["'use client';\n\nimport { useDAWStore } from '@/store/useDAWStore';\nimport { Fader } from '@/components/daw/Fader';\nimport { AudioTimeline } from '@/components/daw/AudioTimeline';\nimport { DawTrackControl } from '@/components/daw/DawTrackControl';\nimport { PianoRoll } from '@/components/daw/PianoRoll';\nimport { TransportBar } from '@/components/daw/TransportBar';\nimport { SpectrumAnalyzer } from '@/components/daw/SpectrumAnalyzer';\nimport { StudioChat } from '@/components/daw/StudioChat';\nimport { Activity } from 'lucide-react';\n\nexport default function Studio() {\n    const faders = useDAWStore((state) => state.faders);\n    const tracks = useDAWStore((state) => state.tracks);\n    const addTrack = useDAWStore((state) => state.addTrack);\n    const isTraining = useDAWStore((state) => state.isTraining);\n    const activeBottomPanel = useDAWStore((state) => state.activeBottomPanel);\n    const mixerBank = useDAWStore((state) => state.mixerBank);\n    const setMixerBank = useDAWStore((state) => state.setMixerBank);\n    const isFullMixer = useDAWStore((state) => state.isFullMixer);\n\n    // Every track has a corresponding fader with same ID\n    const activeFaders = faders;\n\n    return (\n        <div className=\"flex flex-col h-full w-full pointer-events-auto bg-[#0A0A0C]\">\n\n            {/* TOP HEADER: Pro Tools / Logic Transport Bar */}\n            <TransportBar />\n\n            {/* CENTER: Audio Timeline & Track Control Column */}\n            {!isFullMixer && (\n                <div className={`flex flex-1 w-full px-8 py-2 gap-4 z-20 max-w-[2000px] mx-auto overflow-hidden transition-all duration-300 ${activeBottomPanel !== 'closed' ? 'min-h-[250px]' : 'h-full pb-8'}`}>\n                    {/* Left Column: Track Controls */}\n                    <div className=\"w-[200px] bg-[#111113]/80 backdrop-blur-md border border-[#333] flex flex-col overflow-y-auto shadow-2xl rounded-md shrink-0 py-4 custom-scrollbar\">\n                        {tracks.map((track) => (\n                            <DawTrackControl key={track.id} trackId={track.id} trackName={track.name} color={track.color} />\n                        ))}\n                        <button\n                            onClick={() => addTrack()}\n                            className=\"mt-4 mx-4 py-2 border border-dashed border-[#444] rounded text-[#888] hover:text-white hover:border-[#888] transition-colors text-xs font-bold tracking-widest flex items-center justify-center gap-2\"\n                        >\n                            + NEW TRACK\n                        </button>\n                    </div>\n\n                    {/* Main Timeline Canvas */}\n                    <div className=\"flex-1 bg-[#1A1A1C]/90 backdrop-blur-md relative border border-[#333] shadow-2xl rounded-md overflow-hidden\">\n                        <AudioTimeline />\n                    </div>\n                </div>\n            )}\n\n            {/* BOTTOM: Conditional Workspace Panel */}\n            {activeBottomPanel !== 'closed' && (\n                <div className={`w-full mt-auto flex flex-col items-center justify-end z-10 pb-0 overflow-hidden transition-all duration-300 ${isFullMixer ? 'h-full' : (activeBottomPanel === 'piano_roll' ? 'h-[60vh]' : 'h-[400px]')\n                    }`}>\n\n                    {/* MIXER VIEW */}\n                    {activeBottomPanel === 'mixer' && (\n                        <div className=\"flex flex-col items-center w-full z-20\">\n                            {/* Spectrum Analyzer in High-End Glass Frame */}\n                            <div className=\"w-full max-w-5xl h-[120px] mb-4 px-8 relative z-30 group\">\n                                <div className=\"absolute inset-x-8 inset-y-0 bg-black/40 backdrop-blur-2xl border border-white/5 rounded-xl shadow-[0_0_50px_rgba(0,0,0,0.5)] overflow-hidden\">\n                                    <div className=\"absolute top-0 left-0 w-full h-[1px] bg-gradient-to-r from-transparent via-cyan-400/20 to-transparent\" />\n                                    <SpectrumAnalyzer />\n                                </div>\n                            </div>\n\n                            {/* Mixer Toolbar (Modern Bank Switch) */}\n                            <div className=\"w-full max-w-7xl px-8 flex justify-between items-center mb-4 relative z-20\">\n                                <div className=\"flex flex-col\">\n                                    <h4 className=\"text-[10px] font-black tracking-[0.3em] text-[#444] uppercase mb-1\">Mixing Console</h4>\n                                    <div className=\"h-0.5 w-12 bg-orange-600/50\" />\n                                </div>\n\n                                <div className=\"flex bg-[#0A0A0C] p-1 border border-white/5 rounded-lg shadow-2xl ring-1 ring-black/80\">\n                                    <button\n                                        onClick={() => setMixerBank(1)}\n                                        className={`px-6 py-1.5 text-[10px] font-black tracking-widest rounded-md transition-all ${mixerBank === 1 ? 'bg-gradient-to-b from-[#444] to-[#222] text-white shadow-lg border border-white/10' : 'text-[#444] hover:text-[#888]'}`}\n                                    >\n                                        CH 1-16\n                                    </button>\n                                    <button\n                                        onClick={() => setMixerBank(2)}\n                                        className={`px-6 py-1.5 text-[10px] font-black tracking-widest rounded-md transition-all ${mixerBank === 2 ? 'bg-gradient-to-b from-[#444] to-[#222] text-white shadow-lg border border-white/10' : 'text-[#444] hover:text-[#888]'}`}\n                                    >\n                                        CH 17-32\n                                    </button>\n                                </div>\n                            </div>\n\n                            <div className=\"w-full bg-[#111] border-t-2 border-black relative overflow-x-auto custom-scrollbar shadow-[0_-20px_60px_rgba(0,0,0,0.8)]\">\n                                <div className=\"absolute inset-0 bg-transparent opacity-10 mix-blend-overlay pointer-events-none\" />\n\n                                <div className=\"min-w-fit mx-auto flex justify-center py-10 px-12 relative z-10 bg-gradient-to-b from-[#151517] to-[#0A0A0C]\">\n                                    <div className=\"flex gap-1 w-full justify-center\">\n                                        {activeFaders.slice((mixerBank - 1) * 16, mixerBank * 16).map((fader) => (\n                                            <Fader key={fader.id} id={fader.id} />\n                                        ))}\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    )}\n\n                    {/* PIANO ROLL VIEW */}\n                    {activeBottomPanel === 'piano_roll' && (\n                        <div className=\"w-full h-full relative z-20 transform-none\">\n                            <PianoRoll />\n                        </div>\n                    )}\n                </div>\n            )}\n\n            {/* FULLSCREEN TRAINING / PROCESSING OVERLAY */}\n            {isTraining && (\n                <div className=\"fixed inset-0 z-50 flex flex-col items-center justify-center bg-black/80 backdrop-blur-md pointer-events-auto\">\n                    {/* The spectacular glowing DG Logo */}\n                    <div className=\"w-64 h-64 rounded-full relative flex items-center justify-center shadow-[0_0_100px_rgba(255,107,0,0.8)] animate-pulse overflow-hidden border border-orange-500/30\">\n                        {/* Outer spinner ring */}\n                        <div className=\"absolute inset-0 border-8 border-t-white border-r-transparent border-b-white/10 border-l-transparent rounded-full animate-spin z-10\" />\n                        <img src=\"/logo_circular.png\" alt=\"DA GRABA Loading Logo\" className=\"w-full h-full object-cover scale-110\" />\n                    </div>\n\n                    <div className=\"mt-8 flex flex-col items-center gap-2\">\n                        <div className=\"flex items-center gap-3\">\n                            <Activity size={16} className=\"text-primary animate-bounce\" />\n                            <h2 className=\"text-xl font-bold tracking-widest text-[#E0E0E0]\">PROCESANDO EN MODAL</h2>\n                        </div>\n                        <p className=\"text-silver-dark text-sm font-mono tracking-wide max-w-sm text-center\">\n                            Aplicando clonación vocal y auto-mezclando niveles en la consola...\n                        </p>\n                    </div>\n                </div>\n            )}\n\n            {/* AI PRODUCTION CHAT */}\n            <StudioChat />\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}}]
}