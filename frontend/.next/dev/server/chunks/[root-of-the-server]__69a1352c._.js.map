{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/odgmusic/development/Da%20Graba_Studio/app/api/audio-proxy/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\n\nexport async function GET(req: NextRequest) {\n    const { searchParams } = new URL(req.url);\n    const audioUrl = searchParams.get('url');\n\n    if (!audioUrl) {\n        return new NextResponse('Missing url parameter', { status: 400 });\n    }\n\n    try {\n        const response = await fetch(audioUrl, {\n            headers: {\n                // Some CDNs (like Suno) block requests without a standard User-Agent\n                'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36',\n                'Accept': 'audio/webm,audio/ogg,audio/wav,audio/*;q=0.9,application/ogg;q=0.7,video/*;q=0.6,*/*;q=0.5'\n            }\n        });\n\n        if (!response.ok) {\n            throw new Error(`Failed to fetch audio: ${response.statusText}`);\n        }\n\n        const audioData = await response.arrayBuffer();\n\n        // Return the audio data with appropriate headers to bypass CORS in the browser\n        return new NextResponse(audioData, {\n            headers: {\n                'Content-Type': response.headers.get('Content-Type') || 'audio/mpeg',\n                'Access-Control-Allow-Origin': '*',\n                'Cache-Control': 'public, max-age=3600',\n            },\n        });\n    } catch (error: any) {\n        console.error('[AudioProxy] Error:', error);\n        return new NextResponse(`Error fetching audio: ${error.message}`, { status: 500 });\n    }\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe,IAAI,GAAgB;IACtC,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,IAAI,GAAG;IACxC,MAAM,WAAW,aAAa,GAAG,CAAC;IAElC,IAAI,CAAC,UAAU;QACX,OAAO,IAAI,mLAAY,CAAC,yBAAyB;YAAE,QAAQ;QAAI;IACnE;IAEA,IAAI;QACA,MAAM,WAAW,MAAM,MAAM,UAAU;YACnC,SAAS;gBACL,qEAAqE;gBACrE,cAAc;gBACd,UAAU;YACd;QACJ;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YACd,MAAM,IAAI,MAAM,CAAC,uBAAuB,EAAE,SAAS,UAAU,EAAE;QACnE;QAEA,MAAM,YAAY,MAAM,SAAS,WAAW;QAE5C,+EAA+E;QAC/E,OAAO,IAAI,mLAAY,CAAC,WAAW;YAC/B,SAAS;gBACL,gBAAgB,SAAS,OAAO,CAAC,GAAG,CAAC,mBAAmB;gBACxD,+BAA+B;gBAC/B,iBAAiB;YACrB;QACJ;IACJ,EAAE,OAAO,OAAY;QACjB,QAAQ,KAAK,CAAC,uBAAuB;QACrC,OAAO,IAAI,mLAAY,CAAC,CAAC,sBAAsB,EAAE,MAAM,OAAO,EAAE,EAAE;YAAE,QAAQ;QAAI;IACpF;AACJ"}}]
}