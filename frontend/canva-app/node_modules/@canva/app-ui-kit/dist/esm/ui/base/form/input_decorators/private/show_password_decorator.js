import { jsx as _jsx } from "react/jsx-runtime";
import * as React from 'react';
import { useInputControls } from '../../base_input/base_input';
import { EyeIcon } from '../../../icons/eye/icon';
import { EyeSlashIcon } from '../../../icons/eye_slash/icon';
import { ButtonDecorator } from './button_decorator';
import { InputDecoratorsMessages } from './input_decorators.messages';
export const ShowPasswordDecorator = React.memo(
    function ShowPasswordDecorator({ showLabel = InputDecoratorsMessages.showPassword(), hideLabel = InputDecoratorsMessages.hidePassword(), onShow, onHide }) {
        const controls = useInputControls();
        const [show, setShow] = React.useState(false);
        const onClick = React.useCallback(()=>{
            const willShow = !show;
            controls.setType?.(willShow ? 'text' : undefined);
            controls.focus();
            if (willShow) onShow?.();
            else onHide?.();
            setShow(willShow);
        }, [
            show,
            controls,
            onShow,
            onHide
        ]);
        React.useEffect(()=>{
            return ()=>controls.setType?.(undefined);
        }, [
            controls
        ]);
        return _jsx(ButtonDecorator, {
            label: show ? hideLabel : showLabel,
            icon: show ? EyeSlashIcon : EyeIcon,
            onClick: onClick
        });
    }
);
